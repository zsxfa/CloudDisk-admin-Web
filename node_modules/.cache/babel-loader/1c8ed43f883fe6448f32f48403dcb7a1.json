{"remainingRequest":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\babel-loader\\lib\\index.js!D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\src\\views\\acl\\user\\form.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\src\\views\\acl\\user\\form.vue","mtime":1649302923127},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\.babelrc","mtime":1649302887736},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649302895478},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\babel-loader\\lib\\index.js","mtime":1649302893135},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649302895478},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1649302920958}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5IjsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHsgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyB9IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgdXNlckFwaSBmcm9tICdAL2FwaS9hY2wvdXNlcic7CnZhciBkZWZhdWx0Rm9ybSA9IHsKICB1c2VybmFtZTogJycsCiAgbmlja05hbWU6ICcnLAogIHBhc3N3b3JkOiAnJwp9OwoKdmFyIHZhbGlkYXRlUGFzcyA9IGZ1bmN0aW9uIHZhbGlkYXRlUGFzcyhydWxlLCB2YWx1ZSwgY2FsbGJhY2spIHsKICBpZiAodmFsdWUubGVuZ3RoIDwgNikgewogICAgY2FsbGJhY2sobmV3IEVycm9yKCflr4bnoIHkuI3og73lsI/kuo425L2NJykpOwogIH0gZWxzZSB7CiAgICBjYWxsYmFjaygpOwogIH0KfTsKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcjogZGVmYXVsdEZvcm0sCiAgICAgIHNhdmVCdG5EaXNhYmxlZDogZmFsc2UsCiAgICAgIC8vIOS/neWtmOaMiemSruaYr+WQpuemgeeUqCwKICAgICAgdmFsaWRhdGVSdWxlczogewogICAgICAgIHVzZXJuYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicsCiAgICAgICAgICBtZXNzYWdlOiAn55So5oi35ZCN5b+F6aG76L6T5YWlJwogICAgICAgIH1dLAogICAgICAgIHBhc3N3b3JkOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicsCiAgICAgICAgICB2YWxpZGF0b3I6IHZhbGlkYXRlUGFzcwogICAgICAgIH1dCiAgICAgIH0KICAgIH07CiAgfSwKICAvLyDnm5HlkKzlmagKICB3YXRjaDogewogICAgJHJvdXRlOiBmdW5jdGlvbiAkcm91dGUodG8sIGZyb20pIHsKICAgICAgY29uc29sZS5sb2coJ+i3r+eUseWPmOWMli4uLi4uLicpOwogICAgICBjb25zb2xlLmxvZyh0byk7CiAgICAgIGNvbnNvbGUubG9nKGZyb20pOwogICAgICB0aGlzLmluaXQoKTsKICAgIH0KICB9LAogIC8vIOeUn+WRveWRqOacn+aWueazle+8iOWcqOi3r+eUseWIh+aNou+8jOe7hOS7tuS4jeWPmOeahOaDheWGteS4i+S4jeS8muiiq+iwg+eUqO+8iQogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICBjb25zb2xlLmxvZygnZm9ybSBjcmVhdGVkIC4uLi4uLicpOwogICAgdGhpcy5pbml0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDooajljZXliJ3lp4vljJYKICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7CiAgICAgIC8vIGRlYnVnZ2VyCiAgICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMgJiYgdGhpcy4kcm91dGUucGFyYW1zLmlkKSB7CiAgICAgICAgdmFyIGlkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkOwogICAgICAgIHRoaXMuZmV0Y2hEYXRhQnlJZChpZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8g5a+56LGh5ouT5bGV6L+Q566X56ym77ya5ou36LSd5a+56LGh77yM6ICM5LiN5piv6LWL5YC85a+56LGh55qE5byV55SoCiAgICAgICAgdGhpcy51c2VyID0gX29iamVjdFNwcmVhZCh7fSwgZGVmYXVsdEZvcm0pOwogICAgICB9CiAgICB9LAogICAgc2F2ZU9yVXBkYXRlOiBmdW5jdGlvbiBzYXZlT3JVcGRhdGUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLiRyZWZzLnVzZXIudmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBfdGhpcy5zYXZlQnRuRGlzYWJsZWQgPSB0cnVlOyAvLyDpmLLmraLooajljZXph43lpI3mj5DkuqQKCiAgICAgICAgICBpZiAoIV90aGlzLnVzZXIudXNlcmlkKSB7CiAgICAgICAgICAgIF90aGlzLnNhdmVEYXRhKCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpcy51cGRhdGVEYXRhKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDmlrDlop7nlKjmiLcKICAgIHNhdmVEYXRhOiBmdW5jdGlvbiBzYXZlRGF0YSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB1c2VyQXBpLnNhdmUodGhpcy51c2VyKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIC8vIGRlYnVnZ2VyCiAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHsKICAgICAgICAgIF90aGlzMi4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UubWVzc2FnZQogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBfdGhpczIuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIHBhdGg6ICcvYWNsL3VzZXIvbGlzdCcKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5qC55o2uaWTmm7TmlrDorrDlvZUKICAgIHVwZGF0ZURhdGE6IGZ1bmN0aW9uIHVwZGF0ZURhdGEoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgLy8gdGVhY2hlcuaVsOaNrueahOiOt+WPlgogICAgICB1c2VyQXBpLnVwZGF0ZUJ5SWQodGhpcy51c2VyKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIC8vIGRlYnVnZ2VyCiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2Uuc3VjY2Vzcyk7CgogICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzKSB7CiAgICAgICAgICBfdGhpczMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLm1lc3NhZ2UKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgX3RoaXMzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBwYXRoOiAnL2FjbC91c2VyL2xpc3QnCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOagueaNrmlk5p+l6K+i6K6w5b2VCiAgICBmZXRjaERhdGFCeUlkOiBmdW5jdGlvbiBmZXRjaERhdGFCeUlkKGlkKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgLy8gZGVidWdnZXIKICAgICAgdXNlckFwaS5nZXRCeUlkKGlkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIC8vIGRlYnVnZ2VyCiAgICAgICAgX3RoaXM0LnVzZXIgPSByZXNwb25zZS5kYXRhLml0ZW07CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["form.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-form\r\n      ref=\"user\"\r\n      :model=\"user\"\r\n      :rules=\"validateRules\"\r\n      label-width=\"120px\"\r\n    >\r\n      <el-form-item label=\"用户名\" prop=\"username\">\r\n        <el-input v-model=\"user.username\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"用户手机号\">\r\n        <el-input v-model=\"user.telephone\" disabled=\"disabled\" />\r\n      </el-form-item>\r\n\r\n      <el-form-item v-if=\"!user.id\" label=\"用户密码\" prop=\"password\">\r\n        <el-input v-model=\"user.password\" />\r\n      </el-form-item>\r\n\r\n      <el-form-item>\r\n        <el-button\r\n          :disabled=\"saveBtnDisabled\"\r\n          type=\"primary\"\r\n          @click=\"saveOrUpdate\"\r\n        >\r\n          保存\r\n        </el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport userApi from '@/api/acl/user'\r\n\r\nconst defaultForm = {\r\n  username: '',\r\n  nickName: '',\r\n  password: '',\r\n}\r\n\r\nconst validatePass = (rule, value, callback) => {\r\n  if (value.length < 6) {\r\n    callback(new Error('密码不能小于6位'))\r\n  } else {\r\n    callback()\r\n  }\r\n}\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      user: defaultForm,\r\n      saveBtnDisabled: false, // 保存按钮是否禁用,\r\n      validateRules: {\r\n        username: [\r\n          { required: true, trigger: 'blur', message: '用户名必须输入' },\r\n        ],\r\n        password: [\r\n          { required: true, trigger: 'blur', validator: validatePass },\r\n        ],\r\n      },\r\n    }\r\n  },\r\n\r\n  // 监听器\r\n  watch: {\r\n    $route(to, from) {\r\n      console.log('路由变化......')\r\n      console.log(to)\r\n      console.log(from)\r\n      this.init()\r\n    },\r\n  },\r\n\r\n  // 生命周期方法（在路由切换，组件不变的情况下不会被调用）\r\n  created() {\r\n    console.log('form created ......')\r\n    this.init()\r\n  },\r\n\r\n  methods: {\r\n    // 表单初始化\r\n    init() {\r\n      // debugger\r\n      if (this.$route.params && this.$route.params.id) {\r\n        const id = this.$route.params.id\r\n        this.fetchDataById(id)\r\n      } else {\r\n        // 对象拓展运算符：拷贝对象，而不是赋值对象的引用\r\n        this.user = { ...defaultForm }\r\n      }\r\n    },\r\n\r\n    saveOrUpdate() {\r\n      this.$refs.user.validate((valid) => {\r\n        if (valid) {\r\n          this.saveBtnDisabled = true // 防止表单重复提交\r\n          if (!this.user.userid) {\r\n            this.saveData()\r\n          } else {\r\n            this.updateData()\r\n          }\r\n        }\r\n      })\r\n    },\r\n\r\n    // 新增用户\r\n    saveData() {\r\n      userApi.save(this.user).then((response) => {\r\n        // debugger\r\n        if (response.success) {\r\n          this.$message({\r\n            type: 'success',\r\n            message: response.message,\r\n          })\r\n        }\r\n        this.$router.push({ path: '/acl/user/list' })\r\n      })\r\n    },\r\n\r\n    // 根据id更新记录\r\n    updateData() {\r\n      // teacher数据的获取\r\n      userApi.updateById(this.user).then((response) => {\r\n        // debugger\r\n        console.log(response.success)\r\n        if (response.success) {\r\n          this.$message({\r\n            type: 'success',\r\n            message: response.message,\r\n          })\r\n        }\r\n        this.$router.push({ path: '/acl/user/list' })\r\n      })\r\n    },\r\n\r\n    // 根据id查询记录\r\n    fetchDataById(id) {\r\n      // debugger\r\n      userApi.getById(id).then((response) => {\r\n        // debugger\r\n        this.user = response.data.item\r\n      })\r\n    },\r\n  },\r\n}\r\n</script>\r\n"],"sourceRoot":"src/views/acl/user"}]}