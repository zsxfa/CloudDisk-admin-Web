{"remainingRequest":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\babel-loader\\lib\\index.js!D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\src\\views\\acl\\user\\roleForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\src\\views\\acl\\user\\roleForm.vue","mtime":1642336915117},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHVzZXJBcGkgZnJvbSAnQC9hcGkvYWNsL3VzZXInOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNoZWNrQWxsOiBmYWxzZSwKICAgICAgY2hlY2tlZFJvbGVzOiBbXSwKICAgICAgLy/lt7LpgInkuK0KICAgICAgcm9sZXM6IFtdLAogICAgICAvL+aJgOacieeahAogICAgICBpc0luZGV0ZXJtaW5hdGU6IHRydWUsCiAgICAgIHVzZXJJZDogJycsCiAgICAgIHNhdmVCdG5EaXNhYmxlZDogZmFsc2UgLy8g5L+d5a2Y5oyJ6ZKu5piv5ZCm56aB55SoLAoKICAgIH07CiAgfSwKCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuaW5pdCgpOwogIH0sCgogIG1ldGhvZHM6IHsKICAgIGluaXQoKSB7CiAgICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMgJiYgdGhpcy4kcm91dGUucGFyYW1zLmlkKSB7CiAgICAgICAgdGhpcy51c2VySWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQ7CiAgICAgICAgdGhpcy5nZXRCeUlkKHRoaXMudXNlcklkKTsKICAgICAgfQogICAgfSwKCiAgICBnZXRCeUlkKHVzZXJJZCkgewogICAgICB1c2VyQXBpLmdldEFzc2lnbih1c2VySWQpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHZhciBqc29uT2JqID0gcmVzcG9uc2UuZGF0YS5hc3NpZ25Sb2xlczsKICAgICAgICB0aGlzLmNoZWNrZWRSb2xlcyA9IHRoaXMuZ2V0SnNvblRvTGlzdChqc29uT2JqLCAiaWQiKTsKICAgICAgICB0aGlzLnJvbGVzID0gcmVzcG9uc2UuZGF0YS5hbGxSb2xlc0xpc3Q7CiAgICAgIH0pOwogICAgfSwKCiAgICAvL+aKimpzb27mlbDmja7ovazmiJBzdHJpbmflho3ovazmiJDlr7nosaHvvIzmoLnmja5LZXnojrflj5Z2YWx1ZeaVsOaNrgogICAgZ2V0SnNvblRvTGlzdChqc29uLCBrZXkpIHsKICAgICAgLy/miopKU09O5a2X56ym5Liy6L2s5oiQ5a+56LGhCiAgICAgIHZhciBsaXN0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShqc29uKSk7IC8vdmFyIGxpc3QgPSBKU09OLnBhcnNlKGpzb24pCgogICAgICB2YXIgc3RyVGV4dCA9IFtdOyAvL+mBjeWOhui/meS4qumbhuWQiOWvueixoe+8jOiOt+WPlmtleeeahOWAvAoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgc3RyVGV4dC5wdXNoKGxpc3RbaV1ba2V5XSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBzdHJUZXh0OwogICAgfSwKCiAgICBoYW5kbGVDaGVja0FsbENoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5jaGVja2VkUm9sZXMgPSB2YWwgPyB0aGlzLnJvbGVzIDogW107CiAgICAgIHRoaXMuaXNJbmRldGVybWluYXRlID0gZmFsc2U7CiAgICB9LAoKICAgIGhhbmRsZUNoZWNrZWRDaXRpZXNDaGFuZ2UodmFsdWUpIHsKICAgICAgbGV0IGNoZWNrZWRDb3VudCA9IHZhbHVlLmxlbmd0aDsKICAgICAgdGhpcy5jaGVja0FsbCA9IGNoZWNrZWRDb3VudCA9PT0gdGhpcy5yb2xlcy5sZW5ndGg7CiAgICAgIHRoaXMuaXNJbmRldGVybWluYXRlID0gY2hlY2tlZENvdW50ID4gMCAmJiBjaGVja2VkQ291bnQgPCB0aGlzLnJvbGVzLmxlbmd0aDsKICAgIH0sCgogICAgdXBkYXRlKCkgewogICAgICB0aGlzLnNhdmVCdG5EaXNhYmxlZCA9IHRydWU7IC8vIOmYsuatouihqOWNlemHjeWkjeaPkOS6pAoKICAgICAgdmFyIGlkcyA9IHRoaXMuY2hlY2tlZFJvbGVzLmpvaW4oIiwiKTsKICAgICAgY29uc29sZS5sb2coaWRzKTsgLy/kv67mlLnmnYPpmZAKCiAgICAgIHVzZXJBcGkuc2F2ZUFzc2lnbih0aGlzLnVzZXJJZCwgaWRzKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcykgewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgbWVzc2FnZTogJ+S/neWtmOaIkOWKnycKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgcGF0aDogJy9hY2wvdXNlci9saXN0JwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KCiAgfQp9Ow=="},{"version":3,"sources":["roleForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAeA,OAAA,OAAA,MAAA,gBAAA;AAGA,eAAA;AACA,EAAA,IAAA,GAAA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,KADA;AAEA,MAAA,YAAA,EAAA,EAFA;AAEA;AACA,MAAA,KAAA,EAAA,EAHA;AAGA;AACA,MAAA,eAAA,EAAA,IAJA;AAKA,MAAA,MAAA,EAAA,EALA;AAMA,MAAA,eAAA,EAAA,KANA,CAMA;;AANA,KAAA;AAQA,GAVA;;AAWA,EAAA,OAAA,GAAA;AACA,SAAA,IAAA;AACA,GAbA;;AAcA,EAAA,OAAA,EAAA;AACA,IAAA,IAAA,GAAA;AACA,UAAA,KAAA,MAAA,CAAA,MAAA,IAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAA;AACA,aAAA,MAAA,GAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA;AACA,aAAA,OAAA,CAAA,KAAA,MAAA;AACA;AACA,KANA;;AAOA,IAAA,OAAA,CAAA,MAAA,EAAA;AACA,MAAA,OAAA,CAAA,SAAA,CAAA,MAAA,EAAA,IAAA,CAAA,QAAA,IAAA;AACA,YAAA,OAAA,GAAA,QAAA,CAAA,IAAA,CAAA,WAAA;AACA,aAAA,YAAA,GAAA,KAAA,aAAA,CAAA,OAAA,EAAA,IAAA,CAAA;AACA,aAAA,KAAA,GAAA,QAAA,CAAA,IAAA,CAAA,YAAA;AACA,OAJA;AAKA,KAbA;;AAcA;AACA,IAAA,aAAA,CAAA,IAAA,EAAA,GAAA,EAAA;AAEA;AACA,UAAA,IAAA,GAAA,IAAA,CAAA,KAAA,CAAA,IAAA,CAAA,SAAA,CAAA,IAAA,CAAA,CAAA,CAHA,CAIA;;AACA,UAAA,OAAA,GAAA,EAAA,CALA,CAMA;;AACA,WAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,IAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,QAAA,OAAA,CAAA,IAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,GAAA,CAAA;AACA;;AACA,aAAA,OAAA;AAEA,KA3BA;;AA4BA,IAAA,oBAAA,CAAA,GAAA,EAAA;AACA,WAAA,YAAA,GAAA,GAAA,GAAA,KAAA,KAAA,GAAA,EAAA;AACA,WAAA,eAAA,GAAA,KAAA;AACA,KA/BA;;AAgCA,IAAA,yBAAA,CAAA,KAAA,EAAA;AAEA,UAAA,YAAA,GAAA,KAAA,CAAA,MAAA;AACA,WAAA,QAAA,GAAA,YAAA,KAAA,KAAA,KAAA,CAAA,MAAA;AACA,WAAA,eAAA,GAAA,YAAA,GAAA,CAAA,IAAA,YAAA,GAAA,KAAA,KAAA,CAAA,MAAA;AACA,KArCA;;AAsCA,IAAA,MAAA,GAAA;AACA,WAAA,eAAA,GAAA,IAAA,CADA,CACA;;AACA,UAAA,GAAA,GAAA,KAAA,YAAA,CAAA,IAAA,CAAA,GAAA,CAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA,EAHA,CAIA;;AACA,MAAA,OAAA,CAAA,UAAA,CAAA,KAAA,MAAA,EAAA,GAAA,EAAA,IAAA,CAAA,QAAA,IAAA;AACA,YAAA,QAAA,CAAA,OAAA,EAAA;AACA,eAAA,QAAA,CAAA;AACA,YAAA,IAAA,EAAA,SADA;AAEA,YAAA,OAAA,EAAA;AAFA,WAAA;AAKA;;AACA,aAAA,OAAA,CAAA,IAAA,CAAA;AAAA,UAAA,IAAA,EAAA;AAAA,SAAA;AACA,OATA;AAUA;;AArDA;AAdA,CAAA","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-checkbox :indeterminate=\"isIndeterminate\" v-model=\"checkAll\" @change=\"handleCheckAllChange\">全选</el-checkbox>\n    <div style=\"margin: 15px 0;\"></div>\n    <el-checkbox-group v-model=\"checkedRoles\" @change=\"handleCheckedCitiesChange\">\n        <el-checkbox v-for=\"role in roles\" :label=\"role.id\" :key=\"role.id\">{{role.roleName}}</el-checkbox>\n    </el-checkbox-group>\n    </br>\n    <el-button :disabled=\"saveBtnDisabled\" type=\"primary\" @click=\"update\">保存</el-button>\n    \n  </div>\n</template>\n\n<script>\n\nimport userApi from '@/api/acl/user'\n\n\nexport default {\n  data() {\n      return {\n        checkAll: false,\n        checkedRoles: [], //已选中\n        roles: [], //所有的\n        isIndeterminate: true,\n        userId:'',\n        saveBtnDisabled: false // 保存按钮是否禁用,\n      };\n    },\n    created () {\n      this.init()  \n    },\n    methods: {\n      init(){\n          if (this.$route.params && this.$route.params.id) {\n                this.userId = this.$route.params.id\n                this.getById(this.userId)\n            } \n      },\n      getById(userId){\n          userApi.getAssign(userId).then(response => {\n              var jsonObj = response.data.assignRoles\n              this.checkedRoles = this.getJsonToList(jsonObj,\"id\")\n              this.roles = response.data.allRolesList\n          })\n      },\n      //把json数据转成string再转成对象，根据Key获取value数据\n      getJsonToList(json,key){\n        \n          //把JSON字符串转成对象\n          var list = JSON.parse(JSON.stringify(json));\n          //var list = JSON.parse(json)\n          var strText = []\n          //遍历这个集合对象，获取key的值\n          for(var i = 0; i < list.length; i++){\n             strText.push(list[i][key])\n          }\n          return strText;\n        \n      },\n      handleCheckAllChange(val) {\n        this.checkedRoles = val ? this.roles : [];\n        this.isIndeterminate = false;\n      },\n      handleCheckedCitiesChange(value) {\n      \n        let checkedCount = value.length;\n        this.checkAll = checkedCount === this.roles.length;\n        this.isIndeterminate = checkedCount > 0 && checkedCount < this.roles.length;\n      },\n      update(){\n        this.saveBtnDisabled = true // 防止表单重复提交\n        var ids = this.checkedRoles.join(\",\")\n        console.log(ids)\n        //修改权限\n        userApi.saveAssign(this.userId, ids).then(response => {\n            if(response.success){\n              this.$message({\n                type:'success',\n                message:'保存成功'\n              })\n              \n            }\n            this.$router.push({ path: '/acl/user/list' })\n        })\n      }\n    }\n};\n</script>\n"],"sourceRoot":"src/views/acl/user"}]}