{"remainingRequest":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\babel-loader\\lib\\index.js!D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\src\\store\\modules\\permission.js","dependencies":[{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\src\\store\\modules\\permission.js","mtime":1644421260783},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\.babelrc","mtime":1649235073700},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykgeyB0cnkgeyB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7IHZhciB2YWx1ZSA9IGluZm8udmFsdWU7IH0gY2F0Y2ggKGVycm9yKSB7IHJlamVjdChlcnJvcik7IHJldHVybjsgfSBpZiAoaW5mby5kb25lKSB7IHJlc29sdmUodmFsdWUpOyB9IGVsc2UgeyBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7IH0gfQoKZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgdmFyIHNlbGYgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzOyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7IGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7IGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgIm5leHQiLCB2YWx1ZSk7IH0gZnVuY3Rpb24gX3Rocm93KGVycikgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJ0aHJvdyIsIGVycik7IH0gX25leHQodW5kZWZpbmVkKTsgfSk7IH07IH0KCmltcG9ydCB7IGNvbnN0YW50Um91dGVzIH0gZnJvbSAnQC9yb3V0ZXInOwppbXBvcnQgeyBnZXRNZW51IH0gZnJvbSAnQC9hcGkvbG9naW4nOwppbXBvcnQgTGF5b3V0IGZyb20gJ0AvbGF5b3V0L0xheW91dCc7CgpmdW5jdGlvbiBmaWx0ZXJBc3luY1JvdXRlcihhc3luY1JvdXRlck1hcCkgewogIC8vIOmBjeWOhuWQjuWPsOS8oOadpeeahOi3r+eUseWtl+espuS4su+8jOi9rOaNouS4uue7hOS7tuWvueixoQogIHRyeSB7CiAgICB2YXIgYWNjZXNzZWRSb3V0ZXJzID0gYXN5bmNSb3V0ZXJNYXAuZmlsdGVyKGZ1bmN0aW9uIChyb3V0ZSkgewogICAgICBpZiAocm91dGUuY29tcG9uZW50KSB7CiAgICAgICAgaWYgKHJvdXRlLmNvbXBvbmVudCA9PT0gJ0xheW91dCcpIHsKICAgICAgICAgIC8vIExheW91dOe7hOS7tueJueauiuWkhOeQhgogICAgICAgICAgcm91dGUuY29tcG9uZW50ID0gTGF5b3V0OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgY29tcG9uZW50ID0gcm91dGUuY29tcG9uZW50OwoKICAgICAgICAgIHJvdXRlLmNvbXBvbmVudCA9IGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICAgIHJlcXVpcmUoWydAL3ZpZXdzJyArIGNvbXBvbmVudCArICcudnVlJ10sIHJlc29sdmUpOwogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChyb3V0ZS5jaGlsZHJlbiAmJiByb3V0ZS5jaGlsZHJlbi5sZW5ndGgpIHsKICAgICAgICByb3V0ZS5jaGlsZHJlbiA9IGZpbHRlckFzeW5jUm91dGVyKHJvdXRlLmNoaWxkcmVuKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRydWU7CiAgICB9KTsKICAgIHJldHVybiBhY2Nlc3NlZFJvdXRlcnM7CiAgfSBjYXRjaCAoZSkgewogICAgY29uc29sZS5sb2coZSk7CiAgfQp9Cgp2YXIgc3RhdGUgPSB7CiAgcm91dGVzOiBbXSwKICBhZGRSb3V0ZXM6IFtdCn07CnZhciBtdXRhdGlvbnMgPSB7CiAgU0VUX1JPVVRFUzogZnVuY3Rpb24gU0VUX1JPVVRFUyhzdGF0ZSwgcm91dGVzKSB7CiAgICBzdGF0ZS5hZGRSb3V0ZXMgPSByb3V0ZXM7CiAgICBzdGF0ZS5yb3V0ZXMgPSBjb25zdGFudFJvdXRlcy5jb25jYXQocm91dGVzKTsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIGdlbmVyYXRlUm91dGVzOiBmdW5jdGlvbiBnZW5lcmF0ZVJvdXRlcyhfcmVmLCByb2xlcykgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIGNvbW1pdCwgYXN5bmNSb3V0ZXI7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gZ2V0TWVudSgpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGFzeW5jUm91dGVyID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgICAgICAgdmFyIHRtcCA9IGFzeW5jUm91dGVyLmRhdGEucGVybWlzc2lvbkxpc3Q7CiAgICAgICAgICAgICAgICB2YXIgYWNjZXNzZWRSb3V0ZXMgPSBmaWx0ZXJBc3luY1JvdXRlcih0bXApOwogICAgICAgICAgICAgICAgY29tbWl0KCdTRVRfUk9VVEVTJywgYWNjZXNzZWRSb3V0ZXMpOwogICAgICAgICAgICAgICAgcmVzb2x2ZShhY2Nlc3NlZFJvdXRlcyk7CiAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0KfTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHN0YXRlLAogIG11dGF0aW9uczogbXV0YXRpb25zLAogIGFjdGlvbnM6IGFjdGlvbnMKfTs="},{"version":3,"sources":["D:/Developer/bishe/front/CloudDisk-admin-web/src/store/modules/permission.js"],"names":["constantRoutes","getMenu","Layout","filterAsyncRouter","asyncRouterMap","accessedRouters","filter","route","component","resolve","require","children","length","e","console","log","state","routes","addRoutes","mutations","SET_ROUTES","concat","actions","generateRoutes","roles","commit","asyncRouter","Promise","tmp","data","permissionList","accessedRoutes","namespaced"],"mappings":";;;;AAAA,SAASA,cAAT,QAA+B,UAA/B;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,MAAP,MAAmB,iBAAnB;;AAEA,SAASC,iBAAT,CAA2BC,cAA3B,EAA2C;AACzC;AACA,MAAI;AACF,QAAMC,eAAe,GAAGD,cAAc,CAACE,MAAf,CAAsB,UAACC,KAAD,EAAW;AACvD,UAAIA,KAAK,CAACC,SAAV,EAAqB;AACnB,YAAID,KAAK,CAACC,SAAN,KAAoB,QAAxB,EAAkC;AAChC;AACAD,UAAAA,KAAK,CAACC,SAAN,GAAkBN,MAAlB;AACD,SAHD,MAGO;AACL,cAAMM,SAAS,GAAGD,KAAK,CAACC,SAAxB;;AACAD,UAAAA,KAAK,CAACC,SAAN,GAAkB,UAACC,OAAD,EAAa;AAC7BC,YAAAA,OAAO,CAAC,CAAC,YAAYF,SAAZ,GAAwB,MAAzB,CAAD,EAAmCC,OAAnC,CAAP;AACD,WAFD;AAGD;AACF;;AACD,UAAIF,KAAK,CAACI,QAAN,IAAkBJ,KAAK,CAACI,QAAN,CAAeC,MAArC,EAA6C;AAC3CL,QAAAA,KAAK,CAACI,QAAN,GAAiBR,iBAAiB,CAACI,KAAK,CAACI,QAAP,CAAlC;AACD;;AACD,aAAO,IAAP;AACD,KAhBuB,CAAxB;AAkBA,WAAON,eAAP;AACD,GApBD,CAoBE,OAAOQ,CAAP,EAAU;AACVC,IAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACD;AACF;;AAED,IAAMG,KAAK,GAAG;AACZC,EAAAA,MAAM,EAAE,EADI;AAEZC,EAAAA,SAAS,EAAE;AAFC,CAAd;AAKA,IAAMC,SAAS,GAAG;AAChBC,EAAAA,UAAU,EAAE,oBAACJ,KAAD,EAAQC,MAAR,EAAmB;AAC7BD,IAAAA,KAAK,CAACE,SAAN,GAAkBD,MAAlB;AACAD,IAAAA,KAAK,CAACC,MAAN,GAAejB,cAAc,CAACqB,MAAf,CAAsBJ,MAAtB,CAAf;AACD;AAJe,CAAlB;AAOA,IAAMK,OAAO,GAAG;AACRC,EAAAA,cADQ,gCACmBC,KADnB,EAC0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAjBC,cAAAA,MAAiB,QAAjBA,MAAiB;AAAA;AAAA,qBAGZxB,OAAO,EAHK;;AAAA;AAGhCyB,cAAAA,WAHgC;AAAA,+CAK/B,IAAIC,OAAJ,CAAY,UAAClB,OAAD,EAAa;AAC9B,oBAAMmB,GAAG,GAAGF,WAAW,CAACG,IAAZ,CAAiBC,cAA7B;AACA,oBAAMC,cAAc,GAAG5B,iBAAiB,CAACyB,GAAD,CAAxC;AAEAH,gBAAAA,MAAM,CAAC,YAAD,EAAeM,cAAf,CAAN;AACAtB,gBAAAA,OAAO,CAACsB,cAAD,CAAP;AACD,eANM,CAL+B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYvC;AAba,CAAhB;AAgBA,eAAe;AACbC,EAAAA,UAAU,EAAE,IADC;AAEbhB,EAAAA,KAAK,EAALA,KAFa;AAGbG,EAAAA,SAAS,EAATA,SAHa;AAIbG,EAAAA,OAAO,EAAPA;AAJa,CAAf","sourcesContent":["import { constantRoutes } from '@/router'\nimport { getMenu } from '@/api/login'\nimport Layout from '@/layout/Layout'\n\nfunction filterAsyncRouter(asyncRouterMap) {\n  // 遍历后台传来的路由字符串，转换为组件对象\n  try {\n    const accessedRouters = asyncRouterMap.filter((route) => {\n      if (route.component) {\n        if (route.component === 'Layout') {\n          // Layout组件特殊处理\n          route.component = Layout\n        } else {\n          const component = route.component\n          route.component = (resolve) => {\n            require(['@/views' + component + '.vue'], resolve)\n          }\n        }\n      }\n      if (route.children && route.children.length) {\n        route.children = filterAsyncRouter(route.children)\n      }\n      return true\n    })\n\n    return accessedRouters\n  } catch (e) {\n    console.log(e)\n  }\n}\n\nconst state = {\n  routes: [],\n  addRoutes: [],\n}\n\nconst mutations = {\n  SET_ROUTES: (state, routes) => {\n    state.addRoutes = routes\n    state.routes = constantRoutes.concat(routes)\n  },\n}\n\nconst actions = {\n  async generateRoutes({ commit }, roles) {\n    // 取后台路由\n\n    const asyncRouter = await getMenu()\n\n    return new Promise((resolve) => {\n      const tmp = asyncRouter.data.permissionList\n      const accessedRoutes = filterAsyncRouter(tmp)\n\n      commit('SET_ROUTES', accessedRoutes)\n      resolve(accessedRoutes)\n    })\n  },\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions,\n}\n"]}]}