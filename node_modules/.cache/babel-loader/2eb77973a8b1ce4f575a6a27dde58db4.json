{"remainingRequest":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\babel-loader\\lib\\index.js!D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\src\\views\\acl\\user\\roleForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\src\\views\\acl\\user\\roleForm.vue","mtime":1642336915117},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\.babelrc","mtime":1649235498039},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHVzZXJBcGkgZnJvbSAnQC9hcGkvYWNsL3VzZXInOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNoZWNrQWxsOiBmYWxzZSwKICAgICAgY2hlY2tlZFJvbGVzOiBbXSwKICAgICAgLy/lt7LpgInkuK0KICAgICAgcm9sZXM6IFtdLAogICAgICAvL+aJgOacieeahAogICAgICBpc0luZGV0ZXJtaW5hdGU6IHRydWUsCiAgICAgIHVzZXJJZDogJycsCiAgICAgIHNhdmVCdG5EaXNhYmxlZDogZmFsc2UgLy8g5L+d5a2Y5oyJ6ZKu5piv5ZCm56aB55SoLAoKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5pbml0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0OiBmdW5jdGlvbiBpbml0KCkgewogICAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zICYmIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkgewogICAgICAgIHRoaXMudXNlcklkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkOwogICAgICAgIHRoaXMuZ2V0QnlJZCh0aGlzLnVzZXJJZCk7CiAgICAgIH0KICAgIH0sCiAgICBnZXRCeUlkOiBmdW5jdGlvbiBnZXRCeUlkKHVzZXJJZCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdXNlckFwaS5nZXRBc3NpZ24odXNlcklkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciBqc29uT2JqID0gcmVzcG9uc2UuZGF0YS5hc3NpZ25Sb2xlczsKICAgICAgICBfdGhpcy5jaGVja2VkUm9sZXMgPSBfdGhpcy5nZXRKc29uVG9MaXN0KGpzb25PYmosICJpZCIpOwogICAgICAgIF90aGlzLnJvbGVzID0gcmVzcG9uc2UuZGF0YS5hbGxSb2xlc0xpc3Q7CiAgICAgIH0pOwogICAgfSwKICAgIC8v5oqKanNvbuaVsOaNrui9rOaIkHN0cmluZ+WGjei9rOaIkOWvueixoe+8jOagueaNrktleeiOt+WPlnZhbHVl5pWw5o2uCiAgICBnZXRKc29uVG9MaXN0OiBmdW5jdGlvbiBnZXRKc29uVG9MaXN0KGpzb24sIGtleSkgewogICAgICAvL+aKikpTT07lrZfnrKbkuLLovazmiJDlr7nosaEKICAgICAgdmFyIGxpc3QgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGpzb24pKTsgLy92YXIgbGlzdCA9IEpTT04ucGFyc2UoanNvbikKCiAgICAgIHZhciBzdHJUZXh0ID0gW107IC8v6YGN5Y6G6L+Z5Liq6ZuG5ZCI5a+56LGh77yM6I635Y+Wa2V555qE5YC8CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICBzdHJUZXh0LnB1c2gobGlzdFtpXVtrZXldKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHN0clRleHQ7CiAgICB9LAogICAgaGFuZGxlQ2hlY2tBbGxDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZUNoZWNrQWxsQ2hhbmdlKHZhbCkgewogICAgICB0aGlzLmNoZWNrZWRSb2xlcyA9IHZhbCA/IHRoaXMucm9sZXMgOiBbXTsKICAgICAgdGhpcy5pc0luZGV0ZXJtaW5hdGUgPSBmYWxzZTsKICAgIH0sCiAgICBoYW5kbGVDaGVja2VkQ2l0aWVzQ2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVDaGVja2VkQ2l0aWVzQ2hhbmdlKHZhbHVlKSB7CiAgICAgIHZhciBjaGVja2VkQ291bnQgPSB2YWx1ZS5sZW5ndGg7CiAgICAgIHRoaXMuY2hlY2tBbGwgPSBjaGVja2VkQ291bnQgPT09IHRoaXMucm9sZXMubGVuZ3RoOwogICAgICB0aGlzLmlzSW5kZXRlcm1pbmF0ZSA9IGNoZWNrZWRDb3VudCA+IDAgJiYgY2hlY2tlZENvdW50IDwgdGhpcy5yb2xlcy5sZW5ndGg7CiAgICB9LAogICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5zYXZlQnRuRGlzYWJsZWQgPSB0cnVlOyAvLyDpmLLmraLooajljZXph43lpI3mj5DkuqQKCiAgICAgIHZhciBpZHMgPSB0aGlzLmNoZWNrZWRSb2xlcy5qb2luKCIsIik7CiAgICAgIGNvbnNvbGUubG9nKGlkcyk7IC8v5L+u5pS55p2D6ZmQCgogICAgICB1c2VyQXBpLnNhdmVBc3NpZ24odGhpcy51c2VySWQsIGlkcykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcykgewogICAgICAgICAgX3RoaXMyLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBtZXNzYWdlOiAn5L+d5a2Y5oiQ5YqfJwogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBfdGhpczIuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIHBhdGg6ICcvYWNsL3VzZXIvbGlzdCcKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["roleForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAeA,OAAA,OAAA,MAAA,gBAAA;AAGA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,KADA;AAEA,MAAA,YAAA,EAAA,EAFA;AAEA;AACA,MAAA,KAAA,EAAA,EAHA;AAGA;AACA,MAAA,eAAA,EAAA,IAJA;AAKA,MAAA,MAAA,EAAA,EALA;AAMA,MAAA,eAAA,EAAA,KANA,CAMA;;AANA,KAAA;AAQA,GAVA;AAWA,EAAA,OAXA,qBAWA;AACA,SAAA,IAAA;AACA,GAbA;AAcA,EAAA,OAAA,EAAA;AACA,IAAA,IADA,kBACA;AACA,UAAA,KAAA,MAAA,CAAA,MAAA,IAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAA;AACA,aAAA,MAAA,GAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA;AACA,aAAA,OAAA,CAAA,KAAA,MAAA;AACA;AACA,KANA;AAOA,IAAA,OAPA,mBAOA,MAPA,EAOA;AAAA;;AACA,MAAA,OAAA,CAAA,SAAA,CAAA,MAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,YAAA,OAAA,GAAA,QAAA,CAAA,IAAA,CAAA,WAAA;AACA,QAAA,KAAA,CAAA,YAAA,GAAA,KAAA,CAAA,aAAA,CAAA,OAAA,EAAA,IAAA,CAAA;AACA,QAAA,KAAA,CAAA,KAAA,GAAA,QAAA,CAAA,IAAA,CAAA,YAAA;AACA,OAJA;AAKA,KAbA;AAcA;AACA,IAAA,aAfA,yBAeA,IAfA,EAeA,GAfA,EAeA;AAEA;AACA,UAAA,IAAA,GAAA,IAAA,CAAA,KAAA,CAAA,IAAA,CAAA,SAAA,CAAA,IAAA,CAAA,CAAA,CAHA,CAIA;;AACA,UAAA,OAAA,GAAA,EAAA,CALA,CAMA;;AACA,WAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,IAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,QAAA,OAAA,CAAA,IAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,GAAA,CAAA;AACA;;AACA,aAAA,OAAA;AAEA,KA3BA;AA4BA,IAAA,oBA5BA,gCA4BA,GA5BA,EA4BA;AACA,WAAA,YAAA,GAAA,GAAA,GAAA,KAAA,KAAA,GAAA,EAAA;AACA,WAAA,eAAA,GAAA,KAAA;AACA,KA/BA;AAgCA,IAAA,yBAhCA,qCAgCA,KAhCA,EAgCA;AAEA,UAAA,YAAA,GAAA,KAAA,CAAA,MAAA;AACA,WAAA,QAAA,GAAA,YAAA,KAAA,KAAA,KAAA,CAAA,MAAA;AACA,WAAA,eAAA,GAAA,YAAA,GAAA,CAAA,IAAA,YAAA,GAAA,KAAA,KAAA,CAAA,MAAA;AACA,KArCA;AAsCA,IAAA,MAtCA,oBAsCA;AAAA;;AACA,WAAA,eAAA,GAAA,IAAA,CADA,CACA;;AACA,UAAA,GAAA,GAAA,KAAA,YAAA,CAAA,IAAA,CAAA,GAAA,CAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA,EAHA,CAIA;;AACA,MAAA,OAAA,CAAA,UAAA,CAAA,KAAA,MAAA,EAAA,GAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,YAAA,QAAA,CAAA,OAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA;AACA,YAAA,IAAA,EAAA,SADA;AAEA,YAAA,OAAA,EAAA;AAFA,WAAA;AAKA;;AACA,QAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AAAA,UAAA,IAAA,EAAA;AAAA,SAAA;AACA,OATA;AAUA;AArDA;AAdA,CAAA","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-checkbox :indeterminate=\"isIndeterminate\" v-model=\"checkAll\" @change=\"handleCheckAllChange\">全选</el-checkbox>\n    <div style=\"margin: 15px 0;\"></div>\n    <el-checkbox-group v-model=\"checkedRoles\" @change=\"handleCheckedCitiesChange\">\n        <el-checkbox v-for=\"role in roles\" :label=\"role.id\" :key=\"role.id\">{{role.roleName}}</el-checkbox>\n    </el-checkbox-group>\n    </br>\n    <el-button :disabled=\"saveBtnDisabled\" type=\"primary\" @click=\"update\">保存</el-button>\n    \n  </div>\n</template>\n\n<script>\n\nimport userApi from '@/api/acl/user'\n\n\nexport default {\n  data() {\n      return {\n        checkAll: false,\n        checkedRoles: [], //已选中\n        roles: [], //所有的\n        isIndeterminate: true,\n        userId:'',\n        saveBtnDisabled: false // 保存按钮是否禁用,\n      };\n    },\n    created () {\n      this.init()  \n    },\n    methods: {\n      init(){\n          if (this.$route.params && this.$route.params.id) {\n                this.userId = this.$route.params.id\n                this.getById(this.userId)\n            } \n      },\n      getById(userId){\n          userApi.getAssign(userId).then(response => {\n              var jsonObj = response.data.assignRoles\n              this.checkedRoles = this.getJsonToList(jsonObj,\"id\")\n              this.roles = response.data.allRolesList\n          })\n      },\n      //把json数据转成string再转成对象，根据Key获取value数据\n      getJsonToList(json,key){\n        \n          //把JSON字符串转成对象\n          var list = JSON.parse(JSON.stringify(json));\n          //var list = JSON.parse(json)\n          var strText = []\n          //遍历这个集合对象，获取key的值\n          for(var i = 0; i < list.length; i++){\n             strText.push(list[i][key])\n          }\n          return strText;\n        \n      },\n      handleCheckAllChange(val) {\n        this.checkedRoles = val ? this.roles : [];\n        this.isIndeterminate = false;\n      },\n      handleCheckedCitiesChange(value) {\n      \n        let checkedCount = value.length;\n        this.checkAll = checkedCount === this.roles.length;\n        this.isIndeterminate = checkedCount > 0 && checkedCount < this.roles.length;\n      },\n      update(){\n        this.saveBtnDisabled = true // 防止表单重复提交\n        var ids = this.checkedRoles.join(\",\")\n        console.log(ids)\n        //修改权限\n        userApi.saveAssign(this.userId, ids).then(response => {\n            if(response.success){\n              this.$message({\n                type:'success',\n                message:'保存成功'\n              })\n              \n            }\n            this.$router.push({ path: '/acl/user/list' })\n        })\n      }\n    }\n};\n</script>\n"],"sourceRoot":"src/views/acl/user"}]}