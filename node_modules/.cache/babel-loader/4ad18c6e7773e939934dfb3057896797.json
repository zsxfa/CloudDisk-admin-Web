{"remainingRequest":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\babel-loader\\lib\\index.js!D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\src\\store\\modules\\user.js","dependencies":[{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\src\\store\\modules\\user.js","mtime":1644408363061},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\.babelrc","mtime":1649235073700},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykgeyB0cnkgeyB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7IHZhciB2YWx1ZSA9IGluZm8udmFsdWU7IH0gY2F0Y2ggKGVycm9yKSB7IHJlamVjdChlcnJvcik7IHJldHVybjsgfSBpZiAoaW5mby5kb25lKSB7IHJlc29sdmUodmFsdWUpOyB9IGVsc2UgeyBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7IH0gfQoKZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgdmFyIHNlbGYgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzOyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7IGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7IGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgIm5leHQiLCB2YWx1ZSk7IH0gZnVuY3Rpb24gX3Rocm93KGVycikgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJ0aHJvdyIsIGVycik7IH0gX25leHQodW5kZWZpbmVkKTsgfSk7IH07IH0KCmltcG9ydCB7IGxvZ2luLCBsb2dvdXQsIGdldEluZm8gfSBmcm9tICdAL2FwaS9sb2dpbic7CmltcG9ydCB7IGdldFRva2VuLCBzZXRUb2tlbiwgcmVtb3ZlVG9rZW4gfSBmcm9tICdAL3V0aWxzL2F1dGgnOwp2YXIgdXNlciA9IHsKICBzdGF0ZTogewogICAgdG9rZW46IGdldFRva2VuKCksCiAgICBuYW1lOiAnJywKICAgIGF2YXRhcjogJycsCiAgICBidXR0b25zOiBbXSwKICAgIHJvbGVzOiBbXQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBTRVRfVE9LRU46IGZ1bmN0aW9uIFNFVF9UT0tFTihzdGF0ZSwgdG9rZW4pIHsKICAgICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICAgIH0sCiAgICBTRVRfTkFNRTogZnVuY3Rpb24gU0VUX05BTUUoc3RhdGUsIG5hbWUpIHsKICAgICAgc3RhdGUubmFtZSA9IG5hbWU7CiAgICB9LAogICAgU0VUX0FWQVRBUjogZnVuY3Rpb24gU0VUX0FWQVRBUihzdGF0ZSwgYXZhdGFyKSB7CiAgICAgIHN0YXRlLmF2YXRhciA9IGF2YXRhcjsKICAgIH0sCiAgICBTRVRfQlVUVE9OUzogZnVuY3Rpb24gU0VUX0JVVFRPTlMoc3RhdGUsIGJ1dHRvbnMpIHsKICAgICAgc3RhdGUuYnV0dG9ucyA9IGJ1dHRvbnM7CiAgICB9LAogICAgU0VUX1JPTEVTOiBmdW5jdGlvbiBTRVRfUk9MRVMoc3RhdGUsIHJvbGVzKSB7CiAgICAgIHN0YXRlLnJvbGVzID0gcm9sZXM7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICAvLyDnmbvlvZUKICAgIExvZ2luOiBmdW5jdGlvbiBMb2dpbihfcmVmLCB1c2VySW5mbykgewogICAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICAgIGRlYnVnZ2VyOwogICAgICB2YXIgdXNlcm5hbWUgPSB1c2VySW5mby51c2VybmFtZS50cmltKCk7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgbG9naW4odXNlcm5hbWUsIHVzZXJJbmZvLnBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgLy8gZGVidWdnZXIKICAgICAgICAgIHZhciBkYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgIHNldFRva2VuKGRhdGEudG9rZW4pOwogICAgICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCBkYXRhLnRva2VuKTsKICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOiOt+WPlueUqOaIt+S/oeaBrwogICAgR2V0SW5mbzogZnVuY3Rpb24gR2V0SW5mbyhfcmVmMikgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBjb21taXQsIHN0YXRlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYyLmNvbW1pdCwgc3RhdGUgPSBfcmVmMi5zdGF0ZTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgICAgICAgICAgZ2V0SW5mbyhzdGF0ZS50b2tlbikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAvLyBkZWJ1Z2dlcgogICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gcmVzcG9uc2UuZGF0YTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEucm9sZXMgJiYgZGF0YS5yb2xlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAvLyDpqozor4Hov5Tlm57nmoRyb2xlc+aYr+WQpuaYr+S4gOS4qumdnuepuuaVsOe7hAogICAgICAgICAgICAgICAgICAgICAgY29tbWl0KCdTRVRfUk9MRVMnLCBkYXRhLnJvbGVzKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCdnZXRJbmZvOiByb2xlcyBtdXN0IGJlIGEgbm9uLW51bGwgYXJyYXkgIScpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdmFyIGJ1dHRvbkF1dGhMaXN0ID0gW107CiAgICAgICAgICAgICAgICAgICAgZGF0YS5wZXJtaXNzaW9uVmFsdWVMaXN0LmZvckVhY2goZnVuY3Rpb24gKGJ1dHRvbikgewogICAgICAgICAgICAgICAgICAgICAgYnV0dG9uQXV0aExpc3QucHVzaChidXR0b24pOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGNvbW1pdCgnU0VUX05BTUUnLCBkYXRhLm5hbWUpOwogICAgICAgICAgICAgICAgICAgIGNvbW1pdCgnU0VUX0FWQVRBUicsIGRhdGEuYXZhdGFyKTsKICAgICAgICAgICAgICAgICAgICBjb21taXQoJ1NFVF9CVVRUT05TJywgYnV0dG9uQXV0aExpc3QpOwogICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIExvZ091dDogZnVuY3Rpb24gTG9nT3V0KF9yZWYzKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQsCiAgICAgICAgICBzdGF0ZSA9IF9yZWYzLnN0YXRlOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGxvZ291dChzdGF0ZS50b2tlbikudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBkZWJ1Z2dlcjsKICAgICAgICAgIGNvbW1pdCgnU0VUX1RPS0VOJywgJycpOyAvLyDmuIXnqbrliY3nq692dWV45Lit5a2Y5YKo55qE5pWw5o2uCgogICAgICAgICAgY29tbWl0KCdTRVRfUk9MRVMnLCBbXSk7IC8vIOa4heepuuWJjeerr3Z1ZXjkuK3lrZjlgqjnmoTmlbDmja4KCiAgICAgICAgICBjb21taXQoJ1NFVF9CVVRUT05TJywgW10pOwogICAgICAgICAgcmVtb3ZlVG9rZW4oKTsgLy8g5riF56m6Y29va2llCgogICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5YmN56uvIOeZu+WHugogICAgRmVkTG9nT3V0OiBmdW5jdGlvbiBGZWRMb2dPdXQoX3JlZjQpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWY0LmNvbW1pdDsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgZGVidWdnZXI7CiAgICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCAnJyk7CiAgICAgICAgcmVtb3ZlVG9rZW4oKTsKICAgICAgICByZXNvbHZlKCk7CiAgICAgIH0pOwogICAgfQogIH0KfTsKZXhwb3J0IGRlZmF1bHQgdXNlcjs="},{"version":3,"sources":["D:/Developer/bishe/front/CloudDisk-admin-web/src/store/modules/user.js"],"names":["login","logout","getInfo","getToken","setToken","removeToken","user","state","token","name","avatar","buttons","roles","mutations","SET_TOKEN","SET_NAME","SET_AVATAR","SET_BUTTONS","SET_ROLES","actions","Login","userInfo","commit","username","trim","Promise","resolve","reject","password","then","response","data","catch","error","GetInfo","length","buttonAuthList","permissionValueList","forEach","button","push","LogOut","FedLogOut"],"mappings":"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","sourcesContent":["import { login, logout, getInfo } from '@/api/login'\nimport { getToken, setToken, removeToken } from '@/utils/auth'\n\nconst user = {\n  state: {\n    token: getToken(),\n    name: '',\n    avatar: '',\n    buttons: [],\n    roles: [],\n  },\n\n  mutations: {\n    SET_TOKEN: (state, token) => {\n      state.token = token\n    },\n    SET_NAME: (state, name) => {\n      state.name = name\n    },\n    SET_AVATAR: (state, avatar) => {\n      state.avatar = avatar\n    },\n    SET_BUTTONS: (state, buttons) => {\n      state.buttons = buttons\n    },\n    SET_ROLES: (state, roles) => {\n      state.roles = roles\n    },\n  },\n\n  actions: {\n    // 登录\n    Login({ commit }, userInfo) {\n      debugger\n      const username = userInfo.username.trim()\n      return new Promise((resolve, reject) => {\n        login(username, userInfo.password)\n          .then((response) => {\n            // debugger\n            const data = response.data\n            setToken(data.token)\n            commit('SET_TOKEN', data.token)\n            resolve()\n          })\n          .catch((error) => {\n            reject(error)\n          })\n      })\n    },\n\n    // 获取用户信息\n    async GetInfo({ commit, state }) {\n      return new Promise((resolve, reject) => {\n        getInfo(state.token)\n          .then((response) => {\n            // debugger\n            const data = response.data\n            if (data.roles && data.roles.length > 0) {\n              // 验证返回的roles是否是一个非空数组\n              commit('SET_ROLES', data.roles)\n            } else {\n              reject('getInfo: roles must be a non-null array !')\n            }\n\n            const buttonAuthList = []\n            data.permissionValueList.forEach((button) => {\n              buttonAuthList.push(button)\n            })\n\n            commit('SET_NAME', data.name)\n            commit('SET_AVATAR', data.avatar)\n            commit('SET_BUTTONS', buttonAuthList)\n            resolve(response)\n          })\n          .catch((error) => {\n            reject(error)\n          })\n      })\n    },\n    LogOut({ commit, state }) {\n      return new Promise((resolve, reject) => {\n        logout(state.token)\n          .then(() => {\n            debugger\n            commit('SET_TOKEN', '') // 清空前端vuex中存储的数据\n            commit('SET_ROLES', []) // 清空前端vuex中存储的数据\n            commit('SET_BUTTONS', [])\n            removeToken() // 清空cookie\n            resolve()\n          })\n          .catch((error) => {\n            reject(error)\n          })\n      })\n    },\n\n    // 前端 登出\n    FedLogOut({ commit }) {\n      return new Promise((resolve) => {\n        debugger\n        commit('SET_TOKEN', '')\n        removeToken()\n        resolve()\n      })\n    },\n  },\n}\n\nexport default user\n"]}]}