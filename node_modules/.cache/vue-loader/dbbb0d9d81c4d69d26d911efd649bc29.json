{"remainingRequest":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\src\\views\\acl\\menu\\list.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\src\\views\\acl\\menu\\list.vue","mtime":1646365016200},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBtZW51IGZyb20gJ0AvYXBpL2FjbC9tZW51JwoKY29uc3QgbWVudUZvcm0gPSB7CiAgbmFtZTogJycsCiAgcGlkOiAwLAogIHBhdGg6ICcnLAogIGNvbXBvbmVudDogJycsCiAgdHlwZTogJzEnLAp9CmNvbnN0IHBlckZvcm0gPSB7CiAgcGVybWlzc2lvblZhbHVlOiAnJywKICB0eXBlOiAnMicsCiAgbmFtZTogJycsCiAgcGF0aDogJycsCiAgY29tcG9uZW50OiAnJywKICBwaWQ6IDAsCn0KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZmlsdGVyVGV4dDogJycsCiAgICAgIG1lbnVMaXN0OiBbXSwKICAgICAgZGVmYXVsdFByb3BzOiB7CiAgICAgICAgY2hpbGRyZW46ICdjaGlsZHJlbicsCiAgICAgICAgbGFiZWw6ICduYW1lJywKICAgICAgfSwKICAgICAgZGlhbG9nRm9ybVZhbHVlOiAn5re75Yqg6I+c5Y2VJywKICAgICAgZGlhbG9nRm9ybVZpc2libGU6IGZhbHNlLAogICAgICBkaWFsb2dQZXJtaXNzaW9uVmlzaWJsZTogZmFsc2UsCiAgICAgIG1lbnU6IG1lbnVGb3JtLAogICAgICBwZXJtaXNzaW9uOiBwZXJGb3JtLAogICAgICBtZW51VmFsaWRhdGVSdWxlczogewogICAgICAgIG5hbWU6IFt7IHJlcXVpcmVkOiB0cnVlLCB0cmlnZ2VyOiAnYmx1cicsIG1lc3NhZ2U6ICfoj5zljZXlkI3lv4XpobvovpPlhaUnIH1dLAogICAgICAgIHBhdGg6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIHRyaWdnZXI6ICdibHVyJywgbWVzc2FnZTogJ+iPnOWNlei3r+W+hOW/hemhu+i+k+WFpScgfSwKICAgICAgICBdLAogICAgICAgIGNvbXBvbmVudDogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgdHJpZ2dlcjogJ2JsdXInLCBtZXNzYWdlOiAn57uE5Lu25ZCN56ew5b+F6aG76L6T5YWlJyB9LAogICAgICAgIF0sCiAgICAgIH0sCiAgICAgIHBlcm1pc3Npb25WYWxpZGF0ZVJ1bGVzOiB7CiAgICAgICAgbmFtZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgdHJpZ2dlcjogJ2JsdXInLCBtZXNzYWdlOiAn5Yqf6IO95ZCN56ew5b+F6aG76L6T5YWlJyB9LAogICAgICAgIF0sCiAgICAgICAgcGVybWlzc2lvblZhbHVlOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCB0cmlnZ2VyOiAnYmx1cicsIG1lc3NhZ2U6ICflip/og73mnYPpmZDlgLzlv4XpobvovpPlhaUnIH0sCiAgICAgICAgXSwKICAgICAgfSwKICAgIH0KICB9LAogIC8vIOebkeWQrOS4iumdouaWh+acrOahhuaQnOe0ogogIHdhdGNoOiB7CiAgICBmaWx0ZXJUZXh0KHZhbCkgewogICAgICB0aGlzLiRyZWZzLm1lbnVUcmVlLmZpbHRlcih2YWwpCiAgICB9LAogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmZldGNoTm9kZUxpc3QoKQogIH0sCgogIG1ldGhvZHM6IHsKICAgIGZldGNoTm9kZUxpc3QoKSB7CiAgICAgIC8vIGRlYnVnZ2VyCiAgICAgIG1lbnUuZ2V0TmVzdGVkVHJlZUxpc3QoKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzID09PSB0cnVlKSB7CiAgICAgICAgICB0aGlzLm1lbnVMaXN0ID0gcmVzcG9uc2UuZGF0YS5jaGlsZHJlbgogICAgICAgICAgY29uc29sZS5sb2codGhpcy5tZW51TGlzdCkKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgZmlsdGVyTm9kZSh2YWx1ZSwgZGF0YSkgewogICAgICBpZiAoIXZhbHVlKSByZXR1cm4gdHJ1ZQogICAgICBjb25zb2xlLmxvZyhkYXRhKQogICAgICByZXR1cm4gZGF0YS50aXRsZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YodmFsdWUudG9Mb3dlckNhc2UoKSkgIT09IC0xCiAgICB9LAogICAgcmVtb3ZlKGRhdGEpIHsKICAgICAgY29uc29sZS5sb2coZGF0YSkKCiAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuawuOS5heWIoOmZpOivpeiusOW9lSwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJywKICAgICAgfSkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICByZXR1cm4gbWVudS5yZW1vdmVCeUlkKGRhdGEuaWQpCiAgICAgICAgfSkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLmZldGNoTm9kZUxpc3QoKSAvLyDliLfmlrDliJfooagKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfliKDpmaTmiJDlip8hJywKICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAvLyDlpLHotKUKICAgICAgICAgIGlmIChyZXNwb25zZSA9PT0gJ2NhbmNlbCcpIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojliKDpmaQnLAogICAgICAgICAgICB9KQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5aSx6LSlJywKICAgICAgICAgICAgfSkKICAgICAgICAgIH0KICAgICAgICB9KQogICAgfSwKICAgIGFwcGVuZFBlcm1pc3Npb24oKSB7CiAgICAgIHRoaXMuJHJlZnMucGVybWlzc2lvbi52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIGlmICh0aGlzLnBlcm1pc3Npb24uaWQpIHsKICAgICAgICAgICAgdGhpcy51cGRhdGUodGhpcy5wZXJtaXNzaW9uKQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbWVudS5zYXZlTGV2ZWxPbmUodGhpcy5wZXJtaXNzaW9uKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgIHRoaXMuZGlhbG9nUGVybWlzc2lvblZpc2libGUgPSBmYWxzZQogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgbWVzc2FnZTogJ+a3u+WKoOWKn+iDveaIkOWKnycsCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAvLyDliLfmlrDpobXpnaIKICAgICAgICAgICAgICB0aGlzLmZldGNoTm9kZUxpc3QoKQogICAgICAgICAgICAgIHRoaXMubWVudSA9IHsgLi4ubWVudUZvcm0gfQogICAgICAgICAgICAgIHRoaXMucGVybWlzc2lvbiA9IHsgLi4ucGVyRm9ybSB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIGFwcGVuZExldmVsT25lKCkgewogICAgICBtZW51CiAgICAgICAgLnNhdmVMZXZlbE9uZSh0aGlzLm1lbnUpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2UKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfmt7vliqDkuIDnuqfoj5zljZXmiJDlip8nLAogICAgICAgICAgfSkKICAgICAgICAgIC8vIOWIt+aWsOmhtemdogogICAgICAgICAgdGhpcy5mZXRjaE5vZGVMaXN0KCkKICAgICAgICAgIHRoaXMubWVudSA9IHsgLi4ubWVudUZvcm0gfQogICAgICAgICAgdGhpcy5wZXJtaXNzaW9uID0geyAuLi5wZXJGb3JtIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgocmVzcG9uc2UpID0+IHsKICAgICAgICAgIC8vIOS9oOS7rOWGme+8muWIpOaWreeCueWHu+WPlua2iOa4heepuuS4gOS4iwogICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICAgICAgbWVzc2FnZTogJ+a3u+WKoOS4gOe6p+iPnOWNleWksei0pScsCiAgICAgICAgICB9KQogICAgICAgICAgdGhpcy5tZW51ID0geyAuLi5tZW51Rm9ybSB9CiAgICAgICAgICB0aGlzLnBlcm1pc3Npb24gPSB7IC4uLnBlckZvcm0gfQogICAgICAgIH0pCiAgICB9LAoKICAgIGFwcGVuZCgpIHsKICAgICAgdGhpcy4kcmVmcy5tZW51LnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgZGVidWdnZXIKICAgICAgICAgIGlmICghdGhpcy5tZW51LmlkKSB7CiAgICAgICAgICAgIC8vIOa3u+WKoAogICAgICAgICAgICBpZiAodGhpcy5tZW51LnBpZCA9PSAwKSB7CiAgICAgICAgICAgICAgdGhpcy5hcHBlbmRMZXZlbE9uZSgpIC8vIOS4gOe6p+WIhuexu+eahOa3u+WKoAogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuYXBwZW5kTGV2ZWxUd28oKSAvLyDkuoznuqfliIbnsbvnmoTmt7vliqAKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8g5L+u5pS5CiAgICAgICAgICAgIHRoaXMudXBkYXRlKHRoaXMubWVudSkKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pCiAgICB9LAoKICAgIHVwZGF0ZShvYmopIHsKICAgICAgZGVidWdnZXIKICAgICAgbWVudS51cGRhdGUob2JqKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZQogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgbWVzc2FnZTogJ+S/ruaUueaIkOWKnycsCiAgICAgICAgfSkKICAgICAgICAvLyDliLfmlrDpobXpnaIKICAgICAgICB0aGlzLmZldGNoTm9kZUxpc3QoKQogICAgICAgIHRoaXMucmVzdERhdGEoKQogICAgICB9KQogICAgfSwKICAgIGFwcGVuZExldmVsVHdvKCkgewogICAgICBtZW51CiAgICAgICAgLnNhdmVMZXZlbE9uZSh0aGlzLm1lbnUpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAvLyAx44CB5oqK5paH5pys5qGG5YWzCiAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2UKICAgICAgICAgIC8vIDLjgIHmj5DnpLrmiJDlip8KICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfmt7vliqDkuoznuqfliIbnsbvmiJDlip8nLAogICAgICAgICAgfSkKICAgICAgICAgIC8vIDPjgIHliLfmlrDpobXpnaIKICAgICAgICAgIHRoaXMuZmV0Y2hOb2RlTGlzdCgpCiAgICAgICAgICAvLyA044CB5oqKbWVudea4heepugogICAgICAgICAgdGhpcy5tZW51ID0geyAuLi5tZW51Rm9ybSB9CiAgICAgICAgICB0aGlzLnBlcm1pc3Npb24gPSB7IC4uLnBlckZvcm0gfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChyZXNwb25zZSkgPT4gewogICAgICAgICAgLy8gMeOAgeaKiuaWh+acrOahhuWFswogICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICAvLyAy44CB5o+Q56S65oiQ5YqfCiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICAgICAgbWVzc2FnZTogJ+a3u+WKoOS6jOe6p+WIhuexu+Wksei0pScsCiAgICAgICAgICB9KQogICAgICAgICAgLy8gM+OAgeaKim1lbnXmuIXnqboKICAgICAgICAgIHRoaXMubWVudSA9IHsgLi4ubWVudUZvcm0gfQogICAgICAgICAgdGhpcy5wZXJtaXNzaW9uID0geyAuLi5wZXJGb3JtIH0KICAgICAgICB9KQogICAgfSwKICAgIGdldEJ5SWQoZGF0YSkgewogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gdHJ1ZQogICAgICB0aGlzLm1lbnUgPSBkYXRhCiAgICB9LAogICAgdXBkYXRlRnVuY3Rpb24oZGF0YSkgewogICAgICB0aGlzLmRpYWxvZ1Blcm1pc3Npb25WaXNpYmxlID0gdHJ1ZQogICAgICB0aGlzLnBlcm1pc3Npb24gPSBkYXRhCiAgICB9LAogICAgcmVzdERhdGEoKSB7CiAgICAgIHRoaXMuZGlhbG9nUGVybWlzc2lvblZpc2libGUgPSBmYWxzZQogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2UKICAgICAgdGhpcy5tZW51ID0geyAuLi5tZW51Rm9ybSB9CiAgICAgIHRoaXMucGVybWlzc2lvbiA9IHsgLi4ucGVyRm9ybSB9CiAgICB9LAogIH0sCn0K"},{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkJA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/views/acl/menu","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <!-- <el-input\n      v-model=\"filterText\"\n      placeholder=\"Filter keyword\"\n      style=\"margin-bottom: 30px\"\n    /> -->\n\n    <el-table\n      :data=\"menuList\"\n      style=\"width: 100%; margin-bottom: 20px\"\n      row-key=\"id\"\n      border\n      default-expand-all\n      :tree-props=\"{ children: 'children', hasChildren: 'hasChildren' }\"\n    >\n      <el-table-column\n        prop=\"name\"\n        label=\"名称\"\n        sortable\n        width=\"180\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"path\"\n        label=\"访问路径\"\n        sortable\n        width=\"180\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"component\"\n        label=\"组件路径\"\n        sortable\n        width=\"180\"\n      ></el-table-column>\n      <el-table-column prop=\"permissionValue\" label=\"权限值\"></el-table-column>\n      <el-table-column label=\"操作\">\n        <template slot-scope=\"scope\">\n          <!-- v-if=\"node.level == 1 || node.level == 2\" v-if=\"node.level == 3\" v-if=\"node.level == 4\"-->\n          <el-button\n            v-if=\"\n              (scope.row.level == 1 || scope.row.level == 2) &&\n              hasPerm('permission.add')\n            \"\n            type=\"text\"\n            size=\"mini\"\n            @click=\"\n              () => {\n                ;(dialogFormVisible = true), (menu.pid = scope.row.id)\n              }\n            \"\n          >\n            添加菜单\n          </el-button>\n          <el-button\n            v-if=\"scope.row.level == 3 && hasPerm('permission.add')\"\n            type=\"text\"\n            size=\"mini\"\n            @click=\"\n              () => {\n                ;(dialogPermissionVisible = true),\n                  (permission.pid = scope.row.id)\n              }\n            \"\n          >\n            添加功能\n          </el-button>\n          <el-button\n            v-if=\"scope.row.level == 4 && hasPerm('permission.update')\"\n            type=\"text\"\n            size=\"mini\"\n            @click=\"() => updateFunction(scope.row)\"\n          >\n            修改功能\n          </el-button>\n          <el-button\n            v-if=\"scope.row.level != 4 && hasPerm('permission.update')\"\n            type=\"text\"\n            size=\"mini\"\n            @click=\"() => getById(scope.row)\"\n          >\n            修改\n          </el-button>\n          <el-button\n            type=\"text\"\n            size=\"mini\"\n            @click=\"() => remove(scope.row)\"\n            v-if=\"hasPerm('permission.remove')\"\n          >\n            删除\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <el-dialog :visible.sync=\"dialogFormVisible\" :title=\"dialogFormValue\">\n      <el-form\n        ref=\"menu\"\n        :model=\"menu\"\n        :rules=\"menuValidateRules\"\n        label-width=\"120px\"\n      >\n        <el-form-item label=\"菜单名称\" prop=\"name\">\n          <el-input v-model=\"menu.name\" />\n        </el-form-item>\n        <el-form-item label=\"访问路径\" prop=\"path\">\n          <el-input v-model=\"menu.path\" />\n        </el-form-item>\n        <el-form-item label=\"组件路径\" prop=\"component\">\n          <el-input v-model=\"menu.component\" />\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"restData()\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"append()\">确 定</el-button>\n      </div>\n    </el-dialog>\n    <!-- 添加功能的窗口 -->\n    <el-dialog :visible.sync=\"dialogPermissionVisible\" title=\"添加功能\">\n      <el-form\n        ref=\"permission\"\n        :model=\"permission\"\n        :rules=\"permissionValidateRules\"\n        label-width=\"120px\"\n      >\n        <el-form-item label=\"功能名称\" prop=\"name\">\n          <el-input v-model=\"permission.name\" />\n        </el-form-item>\n        <el-form-item label=\"访问路径\">\n          <el-input v-model=\"permission.path\" />\n        </el-form-item>\n        <el-form-item label=\"组件路径\">\n          <el-input v-model=\"permission.component\" />\n        </el-form-item>\n        <el-form-item label=\"功能权限值\" prop=\"permissionValue\">\n          <el-input v-model=\"permission.permissionValue\" />\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"restData()\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"appendPermission()\">确 定</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport menu from '@/api/acl/menu'\n\nconst menuForm = {\n  name: '',\n  pid: 0,\n  path: '',\n  component: '',\n  type: '1',\n}\nconst perForm = {\n  permissionValue: '',\n  type: '2',\n  name: '',\n  path: '',\n  component: '',\n  pid: 0,\n}\n\nexport default {\n  data() {\n    return {\n      filterText: '',\n      menuList: [],\n      defaultProps: {\n        children: 'children',\n        label: 'name',\n      },\n      dialogFormValue: '添加菜单',\n      dialogFormVisible: false,\n      dialogPermissionVisible: false,\n      menu: menuForm,\n      permission: perForm,\n      menuValidateRules: {\n        name: [{ required: true, trigger: 'blur', message: '菜单名必须输入' }],\n        path: [\n          { required: true, trigger: 'blur', message: '菜单路径必须输入' },\n        ],\n        component: [\n          { required: true, trigger: 'blur', message: '组件名称必须输入' },\n        ],\n      },\n      permissionValidateRules: {\n        name: [\n          { required: true, trigger: 'blur', message: '功能名称必须输入' },\n        ],\n        permissionValue: [\n          { required: true, trigger: 'blur', message: '功能权限值必须输入' },\n        ],\n      },\n    }\n  },\n  // 监听上面文本框搜索\n  watch: {\n    filterText(val) {\n      this.$refs.menuTree.filter(val)\n    },\n  },\n\n  created() {\n    this.fetchNodeList()\n  },\n\n  methods: {\n    fetchNodeList() {\n      // debugger\n      menu.getNestedTreeList().then((response) => {\n        if (response.success === true) {\n          this.menuList = response.data.children\n          console.log(this.menuList)\n        }\n      })\n    },\n    filterNode(value, data) {\n      if (!value) return true\n      console.log(data)\n      return data.title.toLowerCase().indexOf(value.toLowerCase()) !== -1\n    },\n    remove(data) {\n      console.log(data)\n\n      this.$confirm('此操作将永久删除该记录, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning',\n      })\n        .then(() => {\n          return menu.removeById(data.id)\n        })\n        .then(() => {\n          this.fetchNodeList() // 刷新列表\n          this.$message({\n            type: 'success',\n            message: '删除成功!',\n          })\n        })\n        .catch((response) => {\n          // 失败\n          if (response === 'cancel') {\n            this.$message({\n              type: 'info',\n              message: '已取消删除',\n            })\n          } else {\n            this.$message({\n              type: 'error',\n              message: '删除失败',\n            })\n          }\n        })\n    },\n    appendPermission() {\n      this.$refs.permission.validate((valid) => {\n        if (valid) {\n          if (this.permission.id) {\n            this.update(this.permission)\n          } else {\n            menu.saveLevelOne(this.permission).then((response) => {\n              this.dialogPermissionVisible = false\n              this.$message({\n                type: 'success',\n                message: '添加功能成功',\n              })\n              // 刷新页面\n              this.fetchNodeList()\n              this.menu = { ...menuForm }\n              this.permission = { ...perForm }\n            })\n          }\n        }\n      })\n    },\n    appendLevelOne() {\n      menu\n        .saveLevelOne(this.menu)\n        .then((response) => {\n          this.dialogFormVisible = false\n          this.$message({\n            type: 'success',\n            message: '添加一级菜单成功',\n          })\n          // 刷新页面\n          this.fetchNodeList()\n          this.menu = { ...menuForm }\n          this.permission = { ...perForm }\n        })\n        .catch((response) => {\n          // 你们写：判断点击取消清空一下\n          this.dialogFormVisible = false\n          this.$message({\n            type: 'error',\n            message: '添加一级菜单失败',\n          })\n          this.menu = { ...menuForm }\n          this.permission = { ...perForm }\n        })\n    },\n\n    append() {\n      this.$refs.menu.validate((valid) => {\n        if (valid) {\n          debugger\n          if (!this.menu.id) {\n            // 添加\n            if (this.menu.pid == 0) {\n              this.appendLevelOne() // 一级分类的添加\n            } else {\n              this.appendLevelTwo() // 二级分类的添加\n            }\n          } else {\n            // 修改\n            this.update(this.menu)\n          }\n        }\n      })\n    },\n\n    update(obj) {\n      debugger\n      menu.update(obj).then((response) => {\n        this.dialogFormVisible = false\n        this.$message({\n          type: 'success',\n          message: '修改成功',\n        })\n        // 刷新页面\n        this.fetchNodeList()\n        this.restData()\n      })\n    },\n    appendLevelTwo() {\n      menu\n        .saveLevelOne(this.menu)\n        .then((response) => {\n          // 1、把文本框关\n          this.dialogFormVisible = false\n          // 2、提示成功\n          this.$message({\n            type: 'success',\n            message: '添加二级分类成功',\n          })\n          // 3、刷新页面\n          this.fetchNodeList()\n          // 4、把menu清空\n          this.menu = { ...menuForm }\n          this.permission = { ...perForm }\n        })\n        .catch((response) => {\n          // 1、把文本框关\n          this.dialogFormVisible = false\n          // 2、提示成功\n          this.$message({\n            type: 'error',\n            message: '添加二级分类失败',\n          })\n          // 3、把menu清空\n          this.menu = { ...menuForm }\n          this.permission = { ...perForm }\n        })\n    },\n    getById(data) {\n      this.dialogFormVisible = true\n      this.menu = data\n    },\n    updateFunction(data) {\n      this.dialogPermissionVisible = true\n      this.permission = data\n    },\n    restData() {\n      this.dialogPermissionVisible = false\n      this.dialogFormVisible = false\n      this.menu = { ...menuForm }\n      this.permission = { ...perForm }\n    },\n  },\n}\n</script>\n"]}]}