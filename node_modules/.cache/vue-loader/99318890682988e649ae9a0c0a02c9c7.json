{"remainingRequest":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\src\\views\\acl\\user\\form.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\src\\views\\acl\\user\\form.vue","mtime":1649302923127},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649302895478},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\babel-loader\\lib\\index.js","mtime":1649302893135},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649302895478},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1649302920958}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgdXNlckFwaSBmcm9tICdAL2FwaS9hY2wvdXNlcicNCg0KY29uc3QgZGVmYXVsdEZvcm0gPSB7DQogIHVzZXJuYW1lOiAnJywNCiAgbmlja05hbWU6ICcnLA0KICBwYXNzd29yZDogJycsDQp9DQoNCmNvbnN0IHZhbGlkYXRlUGFzcyA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsNCiAgaWYgKHZhbHVlLmxlbmd0aCA8IDYpIHsNCiAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+WvhueggeS4jeiDveWwj+S6jjbkvY0nKSkNCiAgfSBlbHNlIHsNCiAgICBjYWxsYmFjaygpDQogIH0NCn0NCg0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICB1c2VyOiBkZWZhdWx0Rm9ybSwNCiAgICAgIHNhdmVCdG5EaXNhYmxlZDogZmFsc2UsIC8vIOS/neWtmOaMiemSruaYr+WQpuemgeeUqCwNCiAgICAgIHZhbGlkYXRlUnVsZXM6IHsNCiAgICAgICAgdXNlcm5hbWU6IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCB0cmlnZ2VyOiAnYmx1cicsIG1lc3NhZ2U6ICfnlKjmiLflkI3lv4XpobvovpPlhaUnIH0sDQogICAgICAgIF0sDQogICAgICAgIHBhc3N3b3JkOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgdHJpZ2dlcjogJ2JsdXInLCB2YWxpZGF0b3I6IHZhbGlkYXRlUGFzcyB9LA0KICAgICAgICBdLA0KICAgICAgfSwNCiAgICB9DQogIH0sDQoNCiAgLy8g55uR5ZCs5ZmoDQogIHdhdGNoOiB7DQogICAgJHJvdXRlKHRvLCBmcm9tKSB7DQogICAgICBjb25zb2xlLmxvZygn6Lev55Sx5Y+Y5YyWLi4uLi4uJykNCiAgICAgIGNvbnNvbGUubG9nKHRvKQ0KICAgICAgY29uc29sZS5sb2coZnJvbSkNCiAgICAgIHRoaXMuaW5pdCgpDQogICAgfSwNCiAgfSwNCg0KICAvLyDnlJ/lkb3lkajmnJ/mlrnms5XvvIjlnKjot6/nlLHliIfmjaLvvIznu4Tku7bkuI3lj5jnmoTmg4XlhrXkuIvkuI3kvJrooqvosIPnlKjvvIkNCiAgY3JlYXRlZCgpIHsNCiAgICBjb25zb2xlLmxvZygnZm9ybSBjcmVhdGVkIC4uLi4uLicpDQogICAgdGhpcy5pbml0KCkNCiAgfSwNCg0KICBtZXRob2RzOiB7DQogICAgLy8g6KGo5Y2V5Yid5aeL5YyWDQogICAgaW5pdCgpIHsNCiAgICAgIC8vIGRlYnVnZ2VyDQogICAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zICYmIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkgew0KICAgICAgICBjb25zdCBpZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZA0KICAgICAgICB0aGlzLmZldGNoRGF0YUJ5SWQoaWQpDQogICAgICB9IGVsc2Ugew0KICAgICAgICAvLyDlr7nosaHmi5PlsZXov5DnrpfnrKbvvJrmi7fotJ3lr7nosaHvvIzogIzkuI3mmK/otYvlgLzlr7nosaHnmoTlvJXnlKgNCiAgICAgICAgdGhpcy51c2VyID0geyAuLi5kZWZhdWx0Rm9ybSB9DQogICAgICB9DQogICAgfSwNCg0KICAgIHNhdmVPclVwZGF0ZSgpIHsNCiAgICAgIHRoaXMuJHJlZnMudXNlci52YWxpZGF0ZSgodmFsaWQpID0+IHsNCiAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgdGhpcy5zYXZlQnRuRGlzYWJsZWQgPSB0cnVlIC8vIOmYsuatouihqOWNlemHjeWkjeaPkOS6pA0KICAgICAgICAgIGlmICghdGhpcy51c2VyLnVzZXJpZCkgew0KICAgICAgICAgICAgdGhpcy5zYXZlRGF0YSgpDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMudXBkYXRlRGF0YSgpDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQoNCiAgICAvLyDmlrDlop7nlKjmiLcNCiAgICBzYXZlRGF0YSgpIHsNCiAgICAgIHVzZXJBcGkuc2F2ZSh0aGlzLnVzZXIpLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgIC8vIGRlYnVnZ2VyDQogICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzKSB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsDQogICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5tZXNzYWdlLA0KICAgICAgICAgIH0pDQogICAgICAgIH0NCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiAnL2FjbC91c2VyL2xpc3QnIH0pDQogICAgICB9KQ0KICAgIH0sDQoNCiAgICAvLyDmoLnmja5pZOabtOaWsOiusOW9lQ0KICAgIHVwZGF0ZURhdGEoKSB7DQogICAgICAvLyB0ZWFjaGVy5pWw5o2u55qE6I635Y+WDQogICAgICB1c2VyQXBpLnVwZGF0ZUJ5SWQodGhpcy51c2VyKS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAvLyBkZWJ1Z2dlcg0KICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5zdWNjZXNzKQ0KICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2Vzcykgew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLA0KICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UubWVzc2FnZSwNCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogJy9hY2wvdXNlci9saXN0JyB9KQ0KICAgICAgfSkNCiAgICB9LA0KDQogICAgLy8g5qC55o2uaWTmn6Xor6LorrDlvZUNCiAgICBmZXRjaERhdGFCeUlkKGlkKSB7DQogICAgICAvLyBkZWJ1Z2dlcg0KICAgICAgdXNlckFwaS5nZXRCeUlkKGlkKS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAvLyBkZWJ1Z2dlcg0KICAgICAgICB0aGlzLnVzZXIgPSByZXNwb25zZS5kYXRhLml0ZW0NCiAgICAgIH0pDQogICAgfSwNCiAgfSwNCn0NCg=="},{"version":3,"sources":["form.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"form.vue","sourceRoot":"src/views/acl/user","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-form\r\n      ref=\"user\"\r\n      :model=\"user\"\r\n      :rules=\"validateRules\"\r\n      label-width=\"120px\"\r\n    >\r\n      <el-form-item label=\"用户名\" prop=\"username\">\r\n        <el-input v-model=\"user.username\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"用户手机号\">\r\n        <el-input v-model=\"user.telephone\" disabled=\"disabled\" />\r\n      </el-form-item>\r\n\r\n      <el-form-item v-if=\"!user.id\" label=\"用户密码\" prop=\"password\">\r\n        <el-input v-model=\"user.password\" />\r\n      </el-form-item>\r\n\r\n      <el-form-item>\r\n        <el-button\r\n          :disabled=\"saveBtnDisabled\"\r\n          type=\"primary\"\r\n          @click=\"saveOrUpdate\"\r\n        >\r\n          保存\r\n        </el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport userApi from '@/api/acl/user'\r\n\r\nconst defaultForm = {\r\n  username: '',\r\n  nickName: '',\r\n  password: '',\r\n}\r\n\r\nconst validatePass = (rule, value, callback) => {\r\n  if (value.length < 6) {\r\n    callback(new Error('密码不能小于6位'))\r\n  } else {\r\n    callback()\r\n  }\r\n}\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      user: defaultForm,\r\n      saveBtnDisabled: false, // 保存按钮是否禁用,\r\n      validateRules: {\r\n        username: [\r\n          { required: true, trigger: 'blur', message: '用户名必须输入' },\r\n        ],\r\n        password: [\r\n          { required: true, trigger: 'blur', validator: validatePass },\r\n        ],\r\n      },\r\n    }\r\n  },\r\n\r\n  // 监听器\r\n  watch: {\r\n    $route(to, from) {\r\n      console.log('路由变化......')\r\n      console.log(to)\r\n      console.log(from)\r\n      this.init()\r\n    },\r\n  },\r\n\r\n  // 生命周期方法（在路由切换，组件不变的情况下不会被调用）\r\n  created() {\r\n    console.log('form created ......')\r\n    this.init()\r\n  },\r\n\r\n  methods: {\r\n    // 表单初始化\r\n    init() {\r\n      // debugger\r\n      if (this.$route.params && this.$route.params.id) {\r\n        const id = this.$route.params.id\r\n        this.fetchDataById(id)\r\n      } else {\r\n        // 对象拓展运算符：拷贝对象，而不是赋值对象的引用\r\n        this.user = { ...defaultForm }\r\n      }\r\n    },\r\n\r\n    saveOrUpdate() {\r\n      this.$refs.user.validate((valid) => {\r\n        if (valid) {\r\n          this.saveBtnDisabled = true // 防止表单重复提交\r\n          if (!this.user.userid) {\r\n            this.saveData()\r\n          } else {\r\n            this.updateData()\r\n          }\r\n        }\r\n      })\r\n    },\r\n\r\n    // 新增用户\r\n    saveData() {\r\n      userApi.save(this.user).then((response) => {\r\n        // debugger\r\n        if (response.success) {\r\n          this.$message({\r\n            type: 'success',\r\n            message: response.message,\r\n          })\r\n        }\r\n        this.$router.push({ path: '/acl/user/list' })\r\n      })\r\n    },\r\n\r\n    // 根据id更新记录\r\n    updateData() {\r\n      // teacher数据的获取\r\n      userApi.updateById(this.user).then((response) => {\r\n        // debugger\r\n        console.log(response.success)\r\n        if (response.success) {\r\n          this.$message({\r\n            type: 'success',\r\n            message: response.message,\r\n          })\r\n        }\r\n        this.$router.push({ path: '/acl/user/list' })\r\n      })\r\n    },\r\n\r\n    // 根据id查询记录\r\n    fetchDataById(id) {\r\n      // debugger\r\n      userApi.getById(id).then((response) => {\r\n        // debugger\r\n        this.user = response.data.item\r\n      })\r\n    },\r\n  },\r\n}\r\n</script>\r\n"]}]}