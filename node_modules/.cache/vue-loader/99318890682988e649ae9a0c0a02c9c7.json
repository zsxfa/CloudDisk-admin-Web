{"remainingRequest":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\src\\views\\acl\\user\\form.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\src\\views\\acl\\user\\form.vue","mtime":1642330980570},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB1c2VyQXBpIGZyb20gJ0AvYXBpL2FjbC91c2VyJwoKY29uc3QgZGVmYXVsdEZvcm0gPSB7CiAgdXNlcm5hbWU6ICcnLAogIG5pY2tOYW1lOiAnJywKICBwYXNzd29yZDogJycsCn0KCmNvbnN0IHZhbGlkYXRlUGFzcyA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICBpZiAodmFsdWUubGVuZ3RoIDwgNikgewogICAgY2FsbGJhY2sobmV3IEVycm9yKCflr4bnoIHkuI3og73lsI/kuo425L2NJykpCiAgfSBlbHNlIHsKICAgIGNhbGxiYWNrKCkKICB9Cn0KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcjogZGVmYXVsdEZvcm0sCiAgICAgIHNhdmVCdG5EaXNhYmxlZDogZmFsc2UsIC8vIOS/neWtmOaMiemSruaYr+WQpuemgeeUqCwKICAgICAgdmFsaWRhdGVSdWxlczogewogICAgICAgIHVzZXJuYW1lOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCB0cmlnZ2VyOiAnYmx1cicsIG1lc3NhZ2U6ICfnlKjmiLflkI3lv4XpobvovpPlhaUnIH0sCiAgICAgICAgXSwKICAgICAgICBwYXNzd29yZDogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgdHJpZ2dlcjogJ2JsdXInLCB2YWxpZGF0b3I6IHZhbGlkYXRlUGFzcyB9LAogICAgICAgIF0sCiAgICAgIH0sCiAgICB9CiAgfSwKCiAgLy8g55uR5ZCs5ZmoCiAgd2F0Y2g6IHsKICAgICRyb3V0ZSh0bywgZnJvbSkgewogICAgICBjb25zb2xlLmxvZygn6Lev55Sx5Y+Y5YyWLi4uLi4uJykKICAgICAgY29uc29sZS5sb2codG8pCiAgICAgIGNvbnNvbGUubG9nKGZyb20pCiAgICAgIHRoaXMuaW5pdCgpCiAgICB9LAogIH0sCgogIC8vIOeUn+WRveWRqOacn+aWueazle+8iOWcqOi3r+eUseWIh+aNou+8jOe7hOS7tuS4jeWPmOeahOaDheWGteS4i+S4jeS8muiiq+iwg+eUqO+8iQogIGNyZWF0ZWQoKSB7CiAgICBjb25zb2xlLmxvZygnZm9ybSBjcmVhdGVkIC4uLi4uLicpCiAgICB0aGlzLmluaXQoKQogIH0sCgogIG1ldGhvZHM6IHsKICAgIC8vIOihqOWNleWIneWni+WMlgogICAgaW5pdCgpIHsKICAgICAgLy8gZGVidWdnZXIKICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcyAmJiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpIHsKICAgICAgICBjb25zdCBpZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZAogICAgICAgIHRoaXMuZmV0Y2hEYXRhQnlJZChpZCkKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyDlr7nosaHmi5PlsZXov5DnrpfnrKbvvJrmi7fotJ3lr7nosaHvvIzogIzkuI3mmK/otYvlgLzlr7nosaHnmoTlvJXnlKgKICAgICAgICB0aGlzLnVzZXIgPSB7IC4uLmRlZmF1bHRGb3JtIH0KICAgICAgfQogICAgfSwKCiAgICBzYXZlT3JVcGRhdGUoKSB7CiAgICAgIHRoaXMuJHJlZnMudXNlci52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHRoaXMuc2F2ZUJ0bkRpc2FibGVkID0gdHJ1ZSAvLyDpmLLmraLooajljZXph43lpI3mj5DkuqQKICAgICAgICAgIGlmICghdGhpcy51c2VyLnVzZXJpZCkgewogICAgICAgICAgICB0aGlzLnNhdmVEYXRhKCkKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMudXBkYXRlRGF0YSgpCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KQogICAgfSwKCiAgICAvLyDmlrDlop7nlKjmiLcKICAgIHNhdmVEYXRhKCkgewogICAgICB1c2VyQXBpLnNhdmUodGhpcy51c2VyKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIC8vIGRlYnVnZ2VyCiAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLm1lc3NhZ2UsCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICcvYWNsL3VzZXIvbGlzdCcgfSkKICAgICAgfSkKICAgIH0sCgogICAgLy8g5qC55o2uaWTmm7TmlrDorrDlvZUKICAgIHVwZGF0ZURhdGEoKSB7CiAgICAgIC8vIHRlYWNoZXLmlbDmja7nmoTojrflj5YKICAgICAgdXNlckFwaS51cGRhdGVCeUlkKHRoaXMudXNlcikudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAvLyBkZWJ1Z2dlcgogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLnN1Y2Nlc3MpCiAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLm1lc3NhZ2UsCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICcvYWNsL3VzZXIvbGlzdCcgfSkKICAgICAgfSkKICAgIH0sCgogICAgLy8g5qC55o2uaWTmn6Xor6LorrDlvZUKICAgIGZldGNoRGF0YUJ5SWQoaWQpIHsKICAgICAgLy8gZGVidWdnZXIKICAgICAgdXNlckFwaS5nZXRCeUlkKGlkKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIC8vIGRlYnVnZ2VyCiAgICAgICAgdGhpcy51c2VyID0gcmVzcG9uc2UuZGF0YS5pdGVtCiAgICAgIH0pCiAgICB9LAogIH0sCn0K"},{"version":3,"sources":["form.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"form.vue","sourceRoot":"src/views/acl/user","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form\n      ref=\"user\"\n      :model=\"user\"\n      :rules=\"validateRules\"\n      label-width=\"120px\"\n    >\n      <el-form-item label=\"用户名\" prop=\"username\">\n        <el-input v-model=\"user.username\" />\n      </el-form-item>\n      <el-form-item label=\"用户手机号\">\n        <el-input v-model=\"user.telephone\" disabled=\"disabled\" />\n      </el-form-item>\n\n      <el-form-item v-if=\"!user.id\" label=\"用户密码\" prop=\"password\">\n        <el-input v-model=\"user.password\" />\n      </el-form-item>\n\n      <el-form-item>\n        <el-button\n          :disabled=\"saveBtnDisabled\"\n          type=\"primary\"\n          @click=\"saveOrUpdate\"\n        >\n          保存\n        </el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport userApi from '@/api/acl/user'\n\nconst defaultForm = {\n  username: '',\n  nickName: '',\n  password: '',\n}\n\nconst validatePass = (rule, value, callback) => {\n  if (value.length < 6) {\n    callback(new Error('密码不能小于6位'))\n  } else {\n    callback()\n  }\n}\n\nexport default {\n  data() {\n    return {\n      user: defaultForm,\n      saveBtnDisabled: false, // 保存按钮是否禁用,\n      validateRules: {\n        username: [\n          { required: true, trigger: 'blur', message: '用户名必须输入' },\n        ],\n        password: [\n          { required: true, trigger: 'blur', validator: validatePass },\n        ],\n      },\n    }\n  },\n\n  // 监听器\n  watch: {\n    $route(to, from) {\n      console.log('路由变化......')\n      console.log(to)\n      console.log(from)\n      this.init()\n    },\n  },\n\n  // 生命周期方法（在路由切换，组件不变的情况下不会被调用）\n  created() {\n    console.log('form created ......')\n    this.init()\n  },\n\n  methods: {\n    // 表单初始化\n    init() {\n      // debugger\n      if (this.$route.params && this.$route.params.id) {\n        const id = this.$route.params.id\n        this.fetchDataById(id)\n      } else {\n        // 对象拓展运算符：拷贝对象，而不是赋值对象的引用\n        this.user = { ...defaultForm }\n      }\n    },\n\n    saveOrUpdate() {\n      this.$refs.user.validate((valid) => {\n        if (valid) {\n          this.saveBtnDisabled = true // 防止表单重复提交\n          if (!this.user.userid) {\n            this.saveData()\n          } else {\n            this.updateData()\n          }\n        }\n      })\n    },\n\n    // 新增用户\n    saveData() {\n      userApi.save(this.user).then((response) => {\n        // debugger\n        if (response.success) {\n          this.$message({\n            type: 'success',\n            message: response.message,\n          })\n        }\n        this.$router.push({ path: '/acl/user/list' })\n      })\n    },\n\n    // 根据id更新记录\n    updateData() {\n      // teacher数据的获取\n      userApi.updateById(this.user).then((response) => {\n        // debugger\n        console.log(response.success)\n        if (response.success) {\n          this.$message({\n            type: 'success',\n            message: response.message,\n          })\n        }\n        this.$router.push({ path: '/acl/user/list' })\n      })\n    },\n\n    // 根据id查询记录\n    fetchDataById(id) {\n      // debugger\n      userApi.getById(id).then((response) => {\n        // debugger\n        this.user = response.data.item\n      })\n    },\n  },\n}\n</script>\n"]}]}