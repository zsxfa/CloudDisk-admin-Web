{"remainingRequest":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\src\\views\\acl\\role\\form.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\src\\views\\acl\\role\\form.vue","mtime":1642381186510},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCByb2xlQXBpIGZyb20gJ0AvYXBpL2FjbC9yb2xlJwoKY29uc3QgZGVmYXVsdEZvcm0gPSB7CiAgcm9sZU5hbWU6ICcnLAp9CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJvbGU6IGRlZmF1bHRGb3JtLAogICAgICBzYXZlQnRuRGlzYWJsZWQ6IGZhbHNlLCAvLyDkv53lrZjmjInpkq7mmK/lkKbnpoHnlKgsCiAgICAgIHZhbGlkYXRlUnVsZXM6IHsKICAgICAgICByb2xlTmFtZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgdHJpZ2dlcjogJ2JsdXInLCBtZXNzYWdlOiAn6KeS6Imy5ZCN5b+F6aG76L6T5YWlJyB9LAogICAgICAgIF0sCiAgICAgIH0sCiAgICB9CiAgfSwKCiAgLy8g55uR5ZCs5ZmoCiAgd2F0Y2g6IHsKICAgICRyb3V0ZSh0bywgZnJvbSkgewogICAgICBjb25zb2xlLmxvZygn6Lev55Sx5Y+Y5YyWLi4uLi4uJykKICAgICAgY29uc29sZS5sb2codG8pCiAgICAgIGNvbnNvbGUubG9nKGZyb20pCiAgICAgIHRoaXMuaW5pdCgpCiAgICB9LAogIH0sCgogIC8vIOeUn+WRveWRqOacn+aWueazle+8iOWcqOi3r+eUseWIh+aNou+8jOe7hOS7tuS4jeWPmOeahOaDheWGteS4i+S4jeS8muiiq+iwg+eUqO+8iQogIGNyZWF0ZWQoKSB7CiAgICBjb25zb2xlLmxvZygnZm9ybSBjcmVhdGVkIC4uLi4uLicpCiAgICB0aGlzLmluaXQoKQogIH0sCgogIG1ldGhvZHM6IHsKICAgIC8vIOihqOWNleWIneWni+WMlgogICAgaW5pdCgpIHsKICAgICAgZGVidWdnZXIKICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcyAmJiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpIHsKICAgICAgICBjb25zdCBpZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZAogICAgICAgIHRoaXMuZmV0Y2hEYXRhQnlJZChpZCkKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyDlr7nosaHmi5PlsZXov5DnrpfnrKbvvJrmi7fotJ3lr7nosaHvvIzogIzkuI3mmK/otYvlgLzlr7nosaHnmoTlvJXnlKgKICAgICAgICB0aGlzLnJvbGUgPSB7IC4uLmRlZmF1bHRGb3JtIH0KICAgICAgfQogICAgfSwKCiAgICBzYXZlT3JVcGRhdGUoKSB7CiAgICAgIHRoaXMuJHJlZnMucm9sZS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHRoaXMuc2F2ZUJ0bkRpc2FibGVkID0gdHJ1ZSAvLyDpmLLmraLooajljZXph43lpI3mj5DkuqQKICAgICAgICAgIGlmICghdGhpcy5yb2xlLmlkKSB7CiAgICAgICAgICAgIHRoaXMuc2F2ZURhdGEoKQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy51cGRhdGVEYXRhKCkKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pCiAgICB9LAoKICAgIC8vIOaWsOWingogICAgc2F2ZURhdGEoKSB7CiAgICAgIHJvbGVBcGkuc2F2ZSh0aGlzLnJvbGUpLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgLy8gZGVidWdnZXIKICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcykgewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UubWVzc2FnZSwKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogJy9hY2wvcm9sZS9saXN0JyB9KQogICAgICB9KQogICAgfSwKCiAgICAvLyDmoLnmja5pZOabtOaWsOiusOW9lQogICAgdXBkYXRlRGF0YSgpIHsKICAgICAgLy8gdGVhY2hlcuaVsOaNrueahOiOt+WPlgogICAgICByb2xlQXBpLnVwZGF0ZUJ5SWQodGhpcy5yb2xlKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5tZXNzYWdlLAogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiAnL2FjbC9yb2xlL2xpc3QnIH0pCiAgICAgIH0pCiAgICB9LAoKICAgIC8vIOagueaNrmlk5p+l6K+i6K6w5b2VCiAgICBmZXRjaERhdGFCeUlkKGlkKSB7CiAgICAgIHJvbGVBcGkuZ2V0QnlJZChpZCkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICBkZWJ1Z2dlcgogICAgICAgIHRoaXMucm9sZSA9IHJlc3BvbnNlLmRhdGEuaXRlbQogICAgICB9KQogICAgfSwKICB9LAp9Cg=="},{"version":3,"sources":["form.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"form.vue","sourceRoot":"src/views/acl/role","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form\n      ref=\"role\"\n      :model=\"role\"\n      :rules=\"validateRules\"\n      label-width=\"120px\"\n    >\n      <el-form-item label=\"角色名称\" prop=\"roleName\">\n        <el-input v-model=\"role.roleName\" />\n      </el-form-item>\n      <el-form-item>\n        <el-button\n          :disabled=\"saveBtnDisabled\"\n          type=\"primary\"\n          @click=\"saveOrUpdate\"\n        >\n          保存\n        </el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport roleApi from '@/api/acl/role'\n\nconst defaultForm = {\n  roleName: '',\n}\n\nexport default {\n  data() {\n    return {\n      role: defaultForm,\n      saveBtnDisabled: false, // 保存按钮是否禁用,\n      validateRules: {\n        roleName: [\n          { required: true, trigger: 'blur', message: '角色名必须输入' },\n        ],\n      },\n    }\n  },\n\n  // 监听器\n  watch: {\n    $route(to, from) {\n      console.log('路由变化......')\n      console.log(to)\n      console.log(from)\n      this.init()\n    },\n  },\n\n  // 生命周期方法（在路由切换，组件不变的情况下不会被调用）\n  created() {\n    console.log('form created ......')\n    this.init()\n  },\n\n  methods: {\n    // 表单初始化\n    init() {\n      debugger\n      if (this.$route.params && this.$route.params.id) {\n        const id = this.$route.params.id\n        this.fetchDataById(id)\n      } else {\n        // 对象拓展运算符：拷贝对象，而不是赋值对象的引用\n        this.role = { ...defaultForm }\n      }\n    },\n\n    saveOrUpdate() {\n      this.$refs.role.validate((valid) => {\n        if (valid) {\n          this.saveBtnDisabled = true // 防止表单重复提交\n          if (!this.role.id) {\n            this.saveData()\n          } else {\n            this.updateData()\n          }\n        }\n      })\n    },\n\n    // 新增\n    saveData() {\n      roleApi.save(this.role).then((response) => {\n        // debugger\n        if (response.success) {\n          this.$message({\n            type: 'success',\n            message: response.message,\n          })\n        }\n        this.$router.push({ path: '/acl/role/list' })\n      })\n    },\n\n    // 根据id更新记录\n    updateData() {\n      // teacher数据的获取\n      roleApi.updateById(this.role).then((response) => {\n        if (response.success) {\n          this.$message({\n            type: 'success',\n            message: response.message,\n          })\n        }\n        this.$router.push({ path: '/acl/role/list' })\n      })\n    },\n\n    // 根据id查询记录\n    fetchDataById(id) {\n      roleApi.getById(id).then((response) => {\n        debugger\n        this.role = response.data.item\n      })\n    },\n  },\n}\n</script>\n"]}]}