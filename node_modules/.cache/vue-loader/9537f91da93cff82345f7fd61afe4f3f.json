{"remainingRequest":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\src\\views\\acl\\role\\form.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\src\\views\\acl\\role\\form.vue","mtime":1649302923124},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649302895478},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\babel-loader\\lib\\index.js","mtime":1649302893135},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649302895478},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1649302920958}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgcm9sZUFwaSBmcm9tICdAL2FwaS9hY2wvcm9sZScNCg0KY29uc3QgZGVmYXVsdEZvcm0gPSB7DQogIHJvbGVOYW1lOiAnJywNCn0NCg0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICByb2xlOiBkZWZhdWx0Rm9ybSwNCiAgICAgIHNhdmVCdG5EaXNhYmxlZDogZmFsc2UsIC8vIOS/neWtmOaMiemSruaYr+WQpuemgeeUqCwNCiAgICAgIHZhbGlkYXRlUnVsZXM6IHsNCiAgICAgICAgcm9sZU5hbWU6IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCB0cmlnZ2VyOiAnYmx1cicsIG1lc3NhZ2U6ICfop5LoibLlkI3lv4XpobvovpPlhaUnIH0sDQogICAgICAgIF0sDQogICAgICB9LA0KICAgIH0NCiAgfSwNCg0KICAvLyDnm5HlkKzlmagNCiAgd2F0Y2g6IHsNCiAgICAkcm91dGUodG8sIGZyb20pIHsNCiAgICAgIGNvbnNvbGUubG9nKCfot6/nlLHlj5jljJYuLi4uLi4nKQ0KICAgICAgY29uc29sZS5sb2codG8pDQogICAgICBjb25zb2xlLmxvZyhmcm9tKQ0KICAgICAgdGhpcy5pbml0KCkNCiAgICB9LA0KICB9LA0KDQogIC8vIOeUn+WRveWRqOacn+aWueazle+8iOWcqOi3r+eUseWIh+aNou+8jOe7hOS7tuS4jeWPmOeahOaDheWGteS4i+S4jeS8muiiq+iwg+eUqO+8iQ0KICBjcmVhdGVkKCkgew0KICAgIGNvbnNvbGUubG9nKCdmb3JtIGNyZWF0ZWQgLi4uLi4uJykNCiAgICB0aGlzLmluaXQoKQ0KICB9LA0KDQogIG1ldGhvZHM6IHsNCiAgICAvLyDooajljZXliJ3lp4vljJYNCiAgICBpbml0KCkgew0KICAgICAgZGVidWdnZXINCiAgICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMgJiYgdGhpcy4kcm91dGUucGFyYW1zLmlkKSB7DQogICAgICAgIGNvbnN0IGlkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkDQogICAgICAgIHRoaXMuZmV0Y2hEYXRhQnlJZChpZCkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIC8vIOWvueixoeaLk+Wxlei/kOeul+espu+8muaLt+i0neWvueixoe+8jOiAjOS4jeaYr+i1i+WAvOWvueixoeeahOW8leeUqA0KICAgICAgICB0aGlzLnJvbGUgPSB7IC4uLmRlZmF1bHRGb3JtIH0NCiAgICAgIH0NCiAgICB9LA0KDQogICAgc2F2ZU9yVXBkYXRlKCkgew0KICAgICAgdGhpcy4kcmVmcy5yb2xlLnZhbGlkYXRlKCh2YWxpZCkgPT4gew0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICB0aGlzLnNhdmVCdG5EaXNhYmxlZCA9IHRydWUgLy8g6Ziy5q2i6KGo5Y2V6YeN5aSN5o+Q5LqkDQogICAgICAgICAgaWYgKCF0aGlzLnJvbGUuaWQpIHsNCiAgICAgICAgICAgIHRoaXMuc2F2ZURhdGEoKQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLnVwZGF0ZURhdGEoKQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KDQogICAgLy8g5paw5aKeDQogICAgc2F2ZURhdGEoKSB7DQogICAgICByb2xlQXBpLnNhdmUodGhpcy5yb2xlKS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAvLyBkZWJ1Z2dlcg0KICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2Vzcykgew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLA0KICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UubWVzc2FnZSwNCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogJy9hY2wvcm9sZS9saXN0JyB9KQ0KICAgICAgfSkNCiAgICB9LA0KDQogICAgLy8g5qC55o2uaWTmm7TmlrDorrDlvZUNCiAgICB1cGRhdGVEYXRhKCkgew0KICAgICAgLy8gdGVhY2hlcuaVsOaNrueahOiOt+WPlg0KICAgICAgcm9sZUFwaS51cGRhdGVCeUlkKHRoaXMucm9sZSkudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywNCiAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLm1lc3NhZ2UsDQogICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICcvYWNsL3JvbGUvbGlzdCcgfSkNCiAgICAgIH0pDQogICAgfSwNCg0KICAgIC8vIOagueaNrmlk5p+l6K+i6K6w5b2VDQogICAgZmV0Y2hEYXRhQnlJZChpZCkgew0KICAgICAgcm9sZUFwaS5nZXRCeUlkKGlkKS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICBkZWJ1Z2dlcg0KICAgICAgICB0aGlzLnJvbGUgPSByZXNwb25zZS5kYXRhLml0ZW0NCiAgICAgIH0pDQogICAgfSwNCiAgfSwNCn0NCg=="},{"version":3,"sources":["form.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"form.vue","sourceRoot":"src/views/acl/role","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-form\r\n      ref=\"role\"\r\n      :model=\"role\"\r\n      :rules=\"validateRules\"\r\n      label-width=\"120px\"\r\n    >\r\n      <el-form-item label=\"角色名称\" prop=\"roleName\">\r\n        <el-input v-model=\"role.roleName\" />\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button\r\n          :disabled=\"saveBtnDisabled\"\r\n          type=\"primary\"\r\n          @click=\"saveOrUpdate\"\r\n        >\r\n          保存\r\n        </el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport roleApi from '@/api/acl/role'\r\n\r\nconst defaultForm = {\r\n  roleName: '',\r\n}\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      role: defaultForm,\r\n      saveBtnDisabled: false, // 保存按钮是否禁用,\r\n      validateRules: {\r\n        roleName: [\r\n          { required: true, trigger: 'blur', message: '角色名必须输入' },\r\n        ],\r\n      },\r\n    }\r\n  },\r\n\r\n  // 监听器\r\n  watch: {\r\n    $route(to, from) {\r\n      console.log('路由变化......')\r\n      console.log(to)\r\n      console.log(from)\r\n      this.init()\r\n    },\r\n  },\r\n\r\n  // 生命周期方法（在路由切换，组件不变的情况下不会被调用）\r\n  created() {\r\n    console.log('form created ......')\r\n    this.init()\r\n  },\r\n\r\n  methods: {\r\n    // 表单初始化\r\n    init() {\r\n      debugger\r\n      if (this.$route.params && this.$route.params.id) {\r\n        const id = this.$route.params.id\r\n        this.fetchDataById(id)\r\n      } else {\r\n        // 对象拓展运算符：拷贝对象，而不是赋值对象的引用\r\n        this.role = { ...defaultForm }\r\n      }\r\n    },\r\n\r\n    saveOrUpdate() {\r\n      this.$refs.role.validate((valid) => {\r\n        if (valid) {\r\n          this.saveBtnDisabled = true // 防止表单重复提交\r\n          if (!this.role.id) {\r\n            this.saveData()\r\n          } else {\r\n            this.updateData()\r\n          }\r\n        }\r\n      })\r\n    },\r\n\r\n    // 新增\r\n    saveData() {\r\n      roleApi.save(this.role).then((response) => {\r\n        // debugger\r\n        if (response.success) {\r\n          this.$message({\r\n            type: 'success',\r\n            message: response.message,\r\n          })\r\n        }\r\n        this.$router.push({ path: '/acl/role/list' })\r\n      })\r\n    },\r\n\r\n    // 根据id更新记录\r\n    updateData() {\r\n      // teacher数据的获取\r\n      roleApi.updateById(this.role).then((response) => {\r\n        if (response.success) {\r\n          this.$message({\r\n            type: 'success',\r\n            message: response.message,\r\n          })\r\n        }\r\n        this.$router.push({ path: '/acl/role/list' })\r\n      })\r\n    },\r\n\r\n    // 根据id查询记录\r\n    fetchDataById(id) {\r\n      roleApi.getById(id).then((response) => {\r\n        debugger\r\n        this.role = response.data.item\r\n      })\r\n    },\r\n  },\r\n}\r\n</script>\r\n"]}]}