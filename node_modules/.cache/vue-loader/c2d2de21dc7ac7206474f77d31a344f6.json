{"remainingRequest":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\src\\views\\acl\\user\\roleForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\src\\views\\acl\\user\\roleForm.vue","mtime":1642336915117},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgdXNlckFwaSBmcm9tICdAL2FwaS9hY2wvdXNlcicKCgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBjaGVja0FsbDogZmFsc2UsCiAgICAgICAgY2hlY2tlZFJvbGVzOiBbXSwgLy/lt7LpgInkuK0KICAgICAgICByb2xlczogW10sIC8v5omA5pyJ55qECiAgICAgICAgaXNJbmRldGVybWluYXRlOiB0cnVlLAogICAgICAgIHVzZXJJZDonJywKICAgICAgICBzYXZlQnRuRGlzYWJsZWQ6IGZhbHNlIC8vIOS/neWtmOaMiemSruaYr+WQpuemgeeUqCwKICAgICAgfTsKICAgIH0sCiAgICBjcmVhdGVkICgpIHsKICAgICAgdGhpcy5pbml0KCkgIAogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgaW5pdCgpewogICAgICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcyAmJiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpIHsKICAgICAgICAgICAgICAgIHRoaXMudXNlcklkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkCiAgICAgICAgICAgICAgICB0aGlzLmdldEJ5SWQodGhpcy51c2VySWQpCiAgICAgICAgICAgIH0gCiAgICAgIH0sCiAgICAgIGdldEJ5SWQodXNlcklkKXsKICAgICAgICAgIHVzZXJBcGkuZ2V0QXNzaWduKHVzZXJJZCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgdmFyIGpzb25PYmogPSByZXNwb25zZS5kYXRhLmFzc2lnblJvbGVzCiAgICAgICAgICAgICAgdGhpcy5jaGVja2VkUm9sZXMgPSB0aGlzLmdldEpzb25Ub0xpc3QoanNvbk9iaiwiaWQiKQogICAgICAgICAgICAgIHRoaXMucm9sZXMgPSByZXNwb25zZS5kYXRhLmFsbFJvbGVzTGlzdAogICAgICAgICAgfSkKICAgICAgfSwKICAgICAgLy/miopqc29u5pWw5o2u6L2s5oiQc3RyaW5n5YaN6L2s5oiQ5a+56LGh77yM5qC55o2uS2V56I635Y+WdmFsdWXmlbDmja4KICAgICAgZ2V0SnNvblRvTGlzdChqc29uLGtleSl7CiAgICAgICAgCiAgICAgICAgICAvL+aKikpTT07lrZfnrKbkuLLovazmiJDlr7nosaEKICAgICAgICAgIHZhciBsaXN0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShqc29uKSk7CiAgICAgICAgICAvL3ZhciBsaXN0ID0gSlNPTi5wYXJzZShqc29uKQogICAgICAgICAgdmFyIHN0clRleHQgPSBbXQogICAgICAgICAgLy/pgY3ljobov5nkuKrpm4blkIjlr7nosaHvvIzojrflj5ZrZXnnmoTlgLwKICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgIHN0clRleHQucHVzaChsaXN0W2ldW2tleV0pCiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gc3RyVGV4dDsKICAgICAgICAKICAgICAgfSwKICAgICAgaGFuZGxlQ2hlY2tBbGxDaGFuZ2UodmFsKSB7CiAgICAgICAgdGhpcy5jaGVja2VkUm9sZXMgPSB2YWwgPyB0aGlzLnJvbGVzIDogW107CiAgICAgICAgdGhpcy5pc0luZGV0ZXJtaW5hdGUgPSBmYWxzZTsKICAgICAgfSwKICAgICAgaGFuZGxlQ2hlY2tlZENpdGllc0NoYW5nZSh2YWx1ZSkgewogICAgICAKICAgICAgICBsZXQgY2hlY2tlZENvdW50ID0gdmFsdWUubGVuZ3RoOwogICAgICAgIHRoaXMuY2hlY2tBbGwgPSBjaGVja2VkQ291bnQgPT09IHRoaXMucm9sZXMubGVuZ3RoOwogICAgICAgIHRoaXMuaXNJbmRldGVybWluYXRlID0gY2hlY2tlZENvdW50ID4gMCAmJiBjaGVja2VkQ291bnQgPCB0aGlzLnJvbGVzLmxlbmd0aDsKICAgICAgfSwKICAgICAgdXBkYXRlKCl7CiAgICAgICAgdGhpcy5zYXZlQnRuRGlzYWJsZWQgPSB0cnVlIC8vIOmYsuatouihqOWNlemHjeWkjeaPkOS6pAogICAgICAgIHZhciBpZHMgPSB0aGlzLmNoZWNrZWRSb2xlcy5qb2luKCIsIikKICAgICAgICBjb25zb2xlLmxvZyhpZHMpCiAgICAgICAgLy/kv67mlLnmnYPpmZAKICAgICAgICB1c2VyQXBpLnNhdmVBc3NpZ24odGhpcy51c2VySWQsIGlkcykudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgIGlmKHJlc3BvbnNlLnN1Y2Nlc3MpewogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgdHlwZTonc3VjY2VzcycsCiAgICAgICAgICAgICAgICBtZXNzYWdlOifkv53lrZjmiJDlip8nCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICcvYWNsL3VzZXIvbGlzdCcgfSkKICAgICAgICB9KQogICAgICB9CiAgICB9Cn07Cg=="},{"version":3,"sources":["roleForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAeA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"roleForm.vue","sourceRoot":"src/views/acl/user","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-checkbox :indeterminate=\"isIndeterminate\" v-model=\"checkAll\" @change=\"handleCheckAllChange\">全选</el-checkbox>\n    <div style=\"margin: 15px 0;\"></div>\n    <el-checkbox-group v-model=\"checkedRoles\" @change=\"handleCheckedCitiesChange\">\n        <el-checkbox v-for=\"role in roles\" :label=\"role.id\" :key=\"role.id\">{{role.roleName}}</el-checkbox>\n    </el-checkbox-group>\n    </br>\n    <el-button :disabled=\"saveBtnDisabled\" type=\"primary\" @click=\"update\">保存</el-button>\n    \n  </div>\n</template>\n\n<script>\n\nimport userApi from '@/api/acl/user'\n\n\nexport default {\n  data() {\n      return {\n        checkAll: false,\n        checkedRoles: [], //已选中\n        roles: [], //所有的\n        isIndeterminate: true,\n        userId:'',\n        saveBtnDisabled: false // 保存按钮是否禁用,\n      };\n    },\n    created () {\n      this.init()  \n    },\n    methods: {\n      init(){\n          if (this.$route.params && this.$route.params.id) {\n                this.userId = this.$route.params.id\n                this.getById(this.userId)\n            } \n      },\n      getById(userId){\n          userApi.getAssign(userId).then(response => {\n              var jsonObj = response.data.assignRoles\n              this.checkedRoles = this.getJsonToList(jsonObj,\"id\")\n              this.roles = response.data.allRolesList\n          })\n      },\n      //把json数据转成string再转成对象，根据Key获取value数据\n      getJsonToList(json,key){\n        \n          //把JSON字符串转成对象\n          var list = JSON.parse(JSON.stringify(json));\n          //var list = JSON.parse(json)\n          var strText = []\n          //遍历这个集合对象，获取key的值\n          for(var i = 0; i < list.length; i++){\n             strText.push(list[i][key])\n          }\n          return strText;\n        \n      },\n      handleCheckAllChange(val) {\n        this.checkedRoles = val ? this.roles : [];\n        this.isIndeterminate = false;\n      },\n      handleCheckedCitiesChange(value) {\n      \n        let checkedCount = value.length;\n        this.checkAll = checkedCount === this.roles.length;\n        this.isIndeterminate = checkedCount > 0 && checkedCount < this.roles.length;\n      },\n      update(){\n        this.saveBtnDisabled = true // 防止表单重复提交\n        var ids = this.checkedRoles.join(\",\")\n        console.log(ids)\n        //修改权限\n        userApi.saveAssign(this.userId, ids).then(response => {\n            if(response.success){\n              this.$message({\n                type:'success',\n                message:'保存成功'\n              })\n              \n            }\n            this.$router.push({ path: '/acl/user/list' })\n        })\n      }\n    }\n};\n</script>\n"]}]}