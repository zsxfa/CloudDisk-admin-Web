{"remainingRequest":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\src\\views\\acl\\user\\roleForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\src\\views\\acl\\user\\roleForm.vue","mtime":1649302923129},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649302895478},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\babel-loader\\lib\\index.js","mtime":1649302893135},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649302895478},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1649302920958}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCB1c2VyQXBpIGZyb20gJ0AvYXBpL2FjbC91c2VyJw0KDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgZGF0YSgpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIGNoZWNrQWxsOiBmYWxzZSwNCiAgICAgICAgY2hlY2tlZFJvbGVzOiBbXSwgLy/lt7LpgInkuK0NCiAgICAgICAgcm9sZXM6IFtdLCAvL+aJgOacieeahA0KICAgICAgICBpc0luZGV0ZXJtaW5hdGU6IHRydWUsDQogICAgICAgIHVzZXJJZDonJywNCiAgICAgICAgc2F2ZUJ0bkRpc2FibGVkOiBmYWxzZSAvLyDkv53lrZjmjInpkq7mmK/lkKbnpoHnlKgsDQogICAgICB9Ow0KICAgIH0sDQogICAgY3JlYXRlZCAoKSB7DQogICAgICB0aGlzLmluaXQoKSAgDQogICAgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICBpbml0KCl7DQogICAgICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcyAmJiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnVzZXJJZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZA0KICAgICAgICAgICAgICAgIHRoaXMuZ2V0QnlJZCh0aGlzLnVzZXJJZCkNCiAgICAgICAgICAgIH0gDQogICAgICB9LA0KICAgICAgZ2V0QnlJZCh1c2VySWQpew0KICAgICAgICAgIHVzZXJBcGkuZ2V0QXNzaWduKHVzZXJJZCkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgIHZhciBqc29uT2JqID0gcmVzcG9uc2UuZGF0YS5hc3NpZ25Sb2xlcw0KICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRSb2xlcyA9IHRoaXMuZ2V0SnNvblRvTGlzdChqc29uT2JqLCJpZCIpDQogICAgICAgICAgICAgIHRoaXMucm9sZXMgPSByZXNwb25zZS5kYXRhLmFsbFJvbGVzTGlzdA0KICAgICAgICAgIH0pDQogICAgICB9LA0KICAgICAgLy/miopqc29u5pWw5o2u6L2s5oiQc3RyaW5n5YaN6L2s5oiQ5a+56LGh77yM5qC55o2uS2V56I635Y+WdmFsdWXmlbDmja4NCiAgICAgIGdldEpzb25Ub0xpc3QoanNvbixrZXkpew0KICAgICAgICANCiAgICAgICAgICAvL+aKikpTT07lrZfnrKbkuLLovazmiJDlr7nosaENCiAgICAgICAgICB2YXIgbGlzdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoanNvbikpOw0KICAgICAgICAgIC8vdmFyIGxpc3QgPSBKU09OLnBhcnNlKGpzb24pDQogICAgICAgICAgdmFyIHN0clRleHQgPSBbXQ0KICAgICAgICAgIC8v6YGN5Y6G6L+Z5Liq6ZuG5ZCI5a+56LGh77yM6I635Y+Wa2V555qE5YC8DQogICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspew0KICAgICAgICAgICAgIHN0clRleHQucHVzaChsaXN0W2ldW2tleV0pDQogICAgICAgICAgfQ0KICAgICAgICAgIHJldHVybiBzdHJUZXh0Ow0KICAgICAgICANCiAgICAgIH0sDQogICAgICBoYW5kbGVDaGVja0FsbENoYW5nZSh2YWwpIHsNCiAgICAgICAgdGhpcy5jaGVja2VkUm9sZXMgPSB2YWwgPyB0aGlzLnJvbGVzIDogW107DQogICAgICAgIHRoaXMuaXNJbmRldGVybWluYXRlID0gZmFsc2U7DQogICAgICB9LA0KICAgICAgaGFuZGxlQ2hlY2tlZENpdGllc0NoYW5nZSh2YWx1ZSkgew0KICAgICAgDQogICAgICAgIGxldCBjaGVja2VkQ291bnQgPSB2YWx1ZS5sZW5ndGg7DQogICAgICAgIHRoaXMuY2hlY2tBbGwgPSBjaGVja2VkQ291bnQgPT09IHRoaXMucm9sZXMubGVuZ3RoOw0KICAgICAgICB0aGlzLmlzSW5kZXRlcm1pbmF0ZSA9IGNoZWNrZWRDb3VudCA+IDAgJiYgY2hlY2tlZENvdW50IDwgdGhpcy5yb2xlcy5sZW5ndGg7DQogICAgICB9LA0KICAgICAgdXBkYXRlKCl7DQogICAgICAgIHRoaXMuc2F2ZUJ0bkRpc2FibGVkID0gdHJ1ZSAvLyDpmLLmraLooajljZXph43lpI3mj5DkuqQNCiAgICAgICAgdmFyIGlkcyA9IHRoaXMuY2hlY2tlZFJvbGVzLmpvaW4oIiwiKQ0KICAgICAgICBjb25zb2xlLmxvZyhpZHMpDQogICAgICAgIC8v5L+u5pS55p2D6ZmQDQogICAgICAgIHVzZXJBcGkuc2F2ZUFzc2lnbih0aGlzLnVzZXJJZCwgaWRzKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgIGlmKHJlc3BvbnNlLnN1Y2Nlc3Mpew0KICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgICB0eXBlOidzdWNjZXNzJywNCiAgICAgICAgICAgICAgICBtZXNzYWdlOifkv53lrZjmiJDlip8nDQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgIA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiAnL2FjbC91c2VyL2xpc3QnIH0pDQogICAgICAgIH0pDQogICAgICB9DQogICAgfQ0KfTsNCg=="},{"version":3,"sources":["roleForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAeA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"roleForm.vue","sourceRoot":"src/views/acl/user","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-checkbox :indeterminate=\"isIndeterminate\" v-model=\"checkAll\" @change=\"handleCheckAllChange\">全选</el-checkbox>\r\n    <div style=\"margin: 15px 0;\"></div>\r\n    <el-checkbox-group v-model=\"checkedRoles\" @change=\"handleCheckedCitiesChange\">\r\n        <el-checkbox v-for=\"role in roles\" :label=\"role.id\" :key=\"role.id\">{{role.roleName}}</el-checkbox>\r\n    </el-checkbox-group>\r\n    </br>\r\n    <el-button :disabled=\"saveBtnDisabled\" type=\"primary\" @click=\"update\">保存</el-button>\r\n    \r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport userApi from '@/api/acl/user'\r\n\r\n\r\nexport default {\r\n  data() {\r\n      return {\r\n        checkAll: false,\r\n        checkedRoles: [], //已选中\r\n        roles: [], //所有的\r\n        isIndeterminate: true,\r\n        userId:'',\r\n        saveBtnDisabled: false // 保存按钮是否禁用,\r\n      };\r\n    },\r\n    created () {\r\n      this.init()  \r\n    },\r\n    methods: {\r\n      init(){\r\n          if (this.$route.params && this.$route.params.id) {\r\n                this.userId = this.$route.params.id\r\n                this.getById(this.userId)\r\n            } \r\n      },\r\n      getById(userId){\r\n          userApi.getAssign(userId).then(response => {\r\n              var jsonObj = response.data.assignRoles\r\n              this.checkedRoles = this.getJsonToList(jsonObj,\"id\")\r\n              this.roles = response.data.allRolesList\r\n          })\r\n      },\r\n      //把json数据转成string再转成对象，根据Key获取value数据\r\n      getJsonToList(json,key){\r\n        \r\n          //把JSON字符串转成对象\r\n          var list = JSON.parse(JSON.stringify(json));\r\n          //var list = JSON.parse(json)\r\n          var strText = []\r\n          //遍历这个集合对象，获取key的值\r\n          for(var i = 0; i < list.length; i++){\r\n             strText.push(list[i][key])\r\n          }\r\n          return strText;\r\n        \r\n      },\r\n      handleCheckAllChange(val) {\r\n        this.checkedRoles = val ? this.roles : [];\r\n        this.isIndeterminate = false;\r\n      },\r\n      handleCheckedCitiesChange(value) {\r\n      \r\n        let checkedCount = value.length;\r\n        this.checkAll = checkedCount === this.roles.length;\r\n        this.isIndeterminate = checkedCount > 0 && checkedCount < this.roles.length;\r\n      },\r\n      update(){\r\n        this.saveBtnDisabled = true // 防止表单重复提交\r\n        var ids = this.checkedRoles.join(\",\")\r\n        console.log(ids)\r\n        //修改权限\r\n        userApi.saveAssign(this.userId, ids).then(response => {\r\n            if(response.success){\r\n              this.$message({\r\n                type:'success',\r\n                message:'保存成功'\r\n              })\r\n              \r\n            }\r\n            this.$router.push({ path: '/acl/user/list' })\r\n        })\r\n      }\r\n    }\r\n};\r\n</script>\r\n"]}]}