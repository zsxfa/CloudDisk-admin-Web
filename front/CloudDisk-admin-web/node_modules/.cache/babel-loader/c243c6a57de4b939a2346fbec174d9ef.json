{"remainingRequest":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\babel-loader\\lib\\index.js!D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\src\\store\\modules\\permission.js","dependencies":[{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\src\\store\\modules\\permission.js","mtime":1644421260783},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY29uc3RhbnRSb3V0ZXMgfSBmcm9tICdAL3JvdXRlcic7CmltcG9ydCB7IGdldE1lbnUgfSBmcm9tICdAL2FwaS9sb2dpbic7CmltcG9ydCBMYXlvdXQgZnJvbSAnQC9sYXlvdXQvTGF5b3V0JzsKCmZ1bmN0aW9uIGZpbHRlckFzeW5jUm91dGVyKGFzeW5jUm91dGVyTWFwKSB7CiAgLy8g6YGN5Y6G5ZCO5Y+w5Lyg5p2l55qE6Lev55Sx5a2X56ym5Liy77yM6L2s5o2i5Li657uE5Lu25a+56LGhCiAgdHJ5IHsKICAgIGNvbnN0IGFjY2Vzc2VkUm91dGVycyA9IGFzeW5jUm91dGVyTWFwLmZpbHRlcihyb3V0ZSA9PiB7CiAgICAgIGlmIChyb3V0ZS5jb21wb25lbnQpIHsKICAgICAgICBpZiAocm91dGUuY29tcG9uZW50ID09PSAnTGF5b3V0JykgewogICAgICAgICAgLy8gTGF5b3V057uE5Lu254m55q6K5aSE55CGCiAgICAgICAgICByb3V0ZS5jb21wb25lbnQgPSBMYXlvdXQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IHJvdXRlLmNvbXBvbmVudDsKCiAgICAgICAgICByb3V0ZS5jb21wb25lbnQgPSByZXNvbHZlID0+IHsKICAgICAgICAgICAgcmVxdWlyZShbJ0Avdmlld3MnICsgY29tcG9uZW50ICsgJy52dWUnXSwgcmVzb2x2ZSk7CiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHJvdXRlLmNoaWxkcmVuICYmIHJvdXRlLmNoaWxkcmVuLmxlbmd0aCkgewogICAgICAgIHJvdXRlLmNoaWxkcmVuID0gZmlsdGVyQXN5bmNSb3V0ZXIocm91dGUuY2hpbGRyZW4pOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0pOwogICAgcmV0dXJuIGFjY2Vzc2VkUm91dGVyczsKICB9IGNhdGNoIChlKSB7CiAgICBjb25zb2xlLmxvZyhlKTsKICB9Cn0KCmNvbnN0IHN0YXRlID0gewogIHJvdXRlczogW10sCiAgYWRkUm91dGVzOiBbXQp9Owpjb25zdCBtdXRhdGlvbnMgPSB7CiAgU0VUX1JPVVRFUzogKHN0YXRlLCByb3V0ZXMpID0+IHsKICAgIHN0YXRlLmFkZFJvdXRlcyA9IHJvdXRlczsKICAgIHN0YXRlLnJvdXRlcyA9IGNvbnN0YW50Um91dGVzLmNvbmNhdChyb3V0ZXMpOwogIH0KfTsKY29uc3QgYWN0aW9ucyA9IHsKICBhc3luYyBnZW5lcmF0ZVJvdXRlcyh7CiAgICBjb21taXQKICB9LCByb2xlcykgewogICAgLy8g5Y+W5ZCO5Y+w6Lev55SxCiAgICBjb25zdCBhc3luY1JvdXRlciA9IGF3YWl0IGdldE1lbnUoKTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgY29uc3QgdG1wID0gYXN5bmNSb3V0ZXIuZGF0YS5wZXJtaXNzaW9uTGlzdDsKICAgICAgY29uc3QgYWNjZXNzZWRSb3V0ZXMgPSBmaWx0ZXJBc3luY1JvdXRlcih0bXApOwogICAgICBjb21taXQoJ1NFVF9ST1VURVMnLCBhY2Nlc3NlZFJvdXRlcyk7CiAgICAgIHJlc29sdmUoYWNjZXNzZWRSb3V0ZXMpOwogICAgfSk7CiAgfQoKfTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGUsCiAgbXV0YXRpb25zLAogIGFjdGlvbnMKfTs="},{"version":3,"sources":["D:/Developer/bishe/front/CloudDisk-admin-web/src/store/modules/permission.js"],"names":["constantRoutes","getMenu","Layout","filterAsyncRouter","asyncRouterMap","accessedRouters","filter","route","component","resolve","require","children","length","e","console","log","state","routes","addRoutes","mutations","SET_ROUTES","concat","actions","generateRoutes","commit","roles","asyncRouter","Promise","tmp","data","permissionList","accessedRoutes","namespaced"],"mappings":"AAAA,SAASA,cAAT,QAA+B,UAA/B;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,MAAP,MAAmB,iBAAnB;;AAEA,SAASC,iBAAT,CAA2BC,cAA3B,EAA2C;AACzC;AACA,MAAI;AACF,UAAMC,eAAe,GAAGD,cAAc,CAACE,MAAf,CAAuBC,KAAD,IAAW;AACvD,UAAIA,KAAK,CAACC,SAAV,EAAqB;AACnB,YAAID,KAAK,CAACC,SAAN,KAAoB,QAAxB,EAAkC;AAChC;AACAD,UAAAA,KAAK,CAACC,SAAN,GAAkBN,MAAlB;AACD,SAHD,MAGO;AACL,gBAAMM,SAAS,GAAGD,KAAK,CAACC,SAAxB;;AACAD,UAAAA,KAAK,CAACC,SAAN,GAAmBC,OAAD,IAAa;AAC7BC,YAAAA,OAAO,CAAC,CAAC,YAAYF,SAAZ,GAAwB,MAAzB,CAAD,EAAmCC,OAAnC,CAAP;AACD,WAFD;AAGD;AACF;;AACD,UAAIF,KAAK,CAACI,QAAN,IAAkBJ,KAAK,CAACI,QAAN,CAAeC,MAArC,EAA6C;AAC3CL,QAAAA,KAAK,CAACI,QAAN,GAAiBR,iBAAiB,CAACI,KAAK,CAACI,QAAP,CAAlC;AACD;;AACD,aAAO,IAAP;AACD,KAhBuB,CAAxB;AAkBA,WAAON,eAAP;AACD,GApBD,CAoBE,OAAOQ,CAAP,EAAU;AACVC,IAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACD;AACF;;AAED,MAAMG,KAAK,GAAG;AACZC,EAAAA,MAAM,EAAE,EADI;AAEZC,EAAAA,SAAS,EAAE;AAFC,CAAd;AAKA,MAAMC,SAAS,GAAG;AAChBC,EAAAA,UAAU,EAAE,CAACJ,KAAD,EAAQC,MAAR,KAAmB;AAC7BD,IAAAA,KAAK,CAACE,SAAN,GAAkBD,MAAlB;AACAD,IAAAA,KAAK,CAACC,MAAN,GAAejB,cAAc,CAACqB,MAAf,CAAsBJ,MAAtB,CAAf;AACD;AAJe,CAAlB;AAOA,MAAMK,OAAO,GAAG;AACd,QAAMC,cAAN,CAAqB;AAAEC,IAAAA;AAAF,GAArB,EAAiCC,KAAjC,EAAwC;AACtC;AAEA,UAAMC,WAAW,GAAG,MAAMzB,OAAO,EAAjC;AAEA,WAAO,IAAI0B,OAAJ,CAAalB,OAAD,IAAa;AAC9B,YAAMmB,GAAG,GAAGF,WAAW,CAACG,IAAZ,CAAiBC,cAA7B;AACA,YAAMC,cAAc,GAAG5B,iBAAiB,CAACyB,GAAD,CAAxC;AAEAJ,MAAAA,MAAM,CAAC,YAAD,EAAeO,cAAf,CAAN;AACAtB,MAAAA,OAAO,CAACsB,cAAD,CAAP;AACD,KANM,CAAP;AAOD;;AAba,CAAhB;AAgBA,eAAe;AACbC,EAAAA,UAAU,EAAE,IADC;AAEbhB,EAAAA,KAFa;AAGbG,EAAAA,SAHa;AAIbG,EAAAA;AAJa,CAAf","sourcesContent":["import { constantRoutes } from '@/router'\nimport { getMenu } from '@/api/login'\nimport Layout from '@/layout/Layout'\n\nfunction filterAsyncRouter(asyncRouterMap) {\n  // 遍历后台传来的路由字符串，转换为组件对象\n  try {\n    const accessedRouters = asyncRouterMap.filter((route) => {\n      if (route.component) {\n        if (route.component === 'Layout') {\n          // Layout组件特殊处理\n          route.component = Layout\n        } else {\n          const component = route.component\n          route.component = (resolve) => {\n            require(['@/views' + component + '.vue'], resolve)\n          }\n        }\n      }\n      if (route.children && route.children.length) {\n        route.children = filterAsyncRouter(route.children)\n      }\n      return true\n    })\n\n    return accessedRouters\n  } catch (e) {\n    console.log(e)\n  }\n}\n\nconst state = {\n  routes: [],\n  addRoutes: [],\n}\n\nconst mutations = {\n  SET_ROUTES: (state, routes) => {\n    state.addRoutes = routes\n    state.routes = constantRoutes.concat(routes)\n  },\n}\n\nconst actions = {\n  async generateRoutes({ commit }, roles) {\n    // 取后台路由\n\n    const asyncRouter = await getMenu()\n\n    return new Promise((resolve) => {\n      const tmp = asyncRouter.data.permissionList\n      const accessedRoutes = filterAsyncRouter(tmp)\n\n      commit('SET_ROUTES', accessedRoutes)\n      resolve(accessedRoutes)\n    })\n  },\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions,\n}\n"]}]}