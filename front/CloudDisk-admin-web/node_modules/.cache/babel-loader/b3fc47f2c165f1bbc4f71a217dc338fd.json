{"remainingRequest":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\babel-loader\\lib\\index.js!D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\src\\views\\acl\\user\\form.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\src\\views\\acl\\user\\form.vue","mtime":1642330980570},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Developer\\bishe\\front\\CloudDisk-admin-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHVzZXJBcGkgZnJvbSAnQC9hcGkvYWNsL3VzZXInOwpjb25zdCBkZWZhdWx0Rm9ybSA9IHsKICB1c2VybmFtZTogJycsCiAgbmlja05hbWU6ICcnLAogIHBhc3N3b3JkOiAnJwp9OwoKY29uc3QgdmFsaWRhdGVQYXNzID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogIGlmICh2YWx1ZS5sZW5ndGggPCA2KSB7CiAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+WvhueggeS4jeiDveWwj+S6jjbkvY0nKSk7CiAgfSBlbHNlIHsKICAgIGNhbGxiYWNrKCk7CiAgfQp9OwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VyOiBkZWZhdWx0Rm9ybSwKICAgICAgc2F2ZUJ0bkRpc2FibGVkOiBmYWxzZSwKICAgICAgLy8g5L+d5a2Y5oyJ6ZKu5piv5ZCm56aB55SoLAogICAgICB2YWxpZGF0ZVJ1bGVzOiB7CiAgICAgICAgdXNlcm5hbWU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJywKICAgICAgICAgIG1lc3NhZ2U6ICfnlKjmiLflkI3lv4XpobvovpPlhaUnCiAgICAgICAgfV0sCiAgICAgICAgcGFzc3dvcmQ6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJywKICAgICAgICAgIHZhbGlkYXRvcjogdmFsaWRhdGVQYXNzCiAgICAgICAgfV0KICAgICAgfQogICAgfTsKICB9LAoKICAvLyDnm5HlkKzlmagKICB3YXRjaDogewogICAgJHJvdXRlKHRvLCBmcm9tKSB7CiAgICAgIGNvbnNvbGUubG9nKCfot6/nlLHlj5jljJYuLi4uLi4nKTsKICAgICAgY29uc29sZS5sb2codG8pOwogICAgICBjb25zb2xlLmxvZyhmcm9tKTsKICAgICAgdGhpcy5pbml0KCk7CiAgICB9CgogIH0sCgogIC8vIOeUn+WRveWRqOacn+aWueazle+8iOWcqOi3r+eUseWIh+aNou+8jOe7hOS7tuS4jeWPmOeahOaDheWGteS4i+S4jeS8muiiq+iwg+eUqO+8iQogIGNyZWF0ZWQoKSB7CiAgICBjb25zb2xlLmxvZygnZm9ybSBjcmVhdGVkIC4uLi4uLicpOwogICAgdGhpcy5pbml0KCk7CiAgfSwKCiAgbWV0aG9kczogewogICAgLy8g6KGo5Y2V5Yid5aeL5YyWCiAgICBpbml0KCkgewogICAgICAvLyBkZWJ1Z2dlcgogICAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zICYmIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkgewogICAgICAgIGNvbnN0IGlkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkOwogICAgICAgIHRoaXMuZmV0Y2hEYXRhQnlJZChpZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8g5a+56LGh5ouT5bGV6L+Q566X56ym77ya5ou36LSd5a+56LGh77yM6ICM5LiN5piv6LWL5YC85a+56LGh55qE5byV55SoCiAgICAgICAgdGhpcy51c2VyID0geyAuLi5kZWZhdWx0Rm9ybQogICAgICAgIH07CiAgICAgIH0KICAgIH0sCgogICAgc2F2ZU9yVXBkYXRlKCkgewogICAgICB0aGlzLiRyZWZzLnVzZXIudmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgdGhpcy5zYXZlQnRuRGlzYWJsZWQgPSB0cnVlOyAvLyDpmLLmraLooajljZXph43lpI3mj5DkuqQKCiAgICAgICAgICBpZiAoIXRoaXMudXNlci51c2VyaWQpIHsKICAgICAgICAgICAgdGhpcy5zYXZlRGF0YSgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy51cGRhdGVEYXRhKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgLy8g5paw5aKe55So5oi3CiAgICBzYXZlRGF0YSgpIHsKICAgICAgdXNlckFwaS5zYXZlKHRoaXMudXNlcikudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgLy8gZGVidWdnZXIKICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcykgewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UubWVzc2FnZQogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBwYXRoOiAnL2FjbC91c2VyL2xpc3QnCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKCiAgICAvLyDmoLnmja5pZOabtOaWsOiusOW9lQogICAgdXBkYXRlRGF0YSgpIHsKICAgICAgLy8gdGVhY2hlcuaVsOaNrueahOiOt+WPlgogICAgICB1c2VyQXBpLnVwZGF0ZUJ5SWQodGhpcy51c2VyKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAvLyBkZWJ1Z2dlcgogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLnN1Y2Nlc3MpOwoKICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcykgewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UubWVzc2FnZQogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBwYXRoOiAnL2FjbC91c2VyL2xpc3QnCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKCiAgICAvLyDmoLnmja5pZOafpeivouiusOW9lQogICAgZmV0Y2hEYXRhQnlJZChpZCkgewogICAgICAvLyBkZWJ1Z2dlcgogICAgICB1c2VyQXBpLmdldEJ5SWQoaWQpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIC8vIGRlYnVnZ2VyCiAgICAgICAgdGhpcy51c2VyID0gcmVzcG9uc2UuZGF0YS5pdGVtOwogICAgICB9KTsKICAgIH0KCiAgfQp9Ow=="},{"version":3,"sources":["form.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form\n      ref=\"user\"\n      :model=\"user\"\n      :rules=\"validateRules\"\n      label-width=\"120px\"\n    >\n      <el-form-item label=\"用户名\" prop=\"username\">\n        <el-input v-model=\"user.username\" />\n      </el-form-item>\n      <el-form-item label=\"用户手机号\">\n        <el-input v-model=\"user.telephone\" disabled=\"disabled\" />\n      </el-form-item>\n\n      <el-form-item v-if=\"!user.id\" label=\"用户密码\" prop=\"password\">\n        <el-input v-model=\"user.password\" />\n      </el-form-item>\n\n      <el-form-item>\n        <el-button\n          :disabled=\"saveBtnDisabled\"\n          type=\"primary\"\n          @click=\"saveOrUpdate\"\n        >\n          保存\n        </el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport userApi from '@/api/acl/user'\n\nconst defaultForm = {\n  username: '',\n  nickName: '',\n  password: '',\n}\n\nconst validatePass = (rule, value, callback) => {\n  if (value.length < 6) {\n    callback(new Error('密码不能小于6位'))\n  } else {\n    callback()\n  }\n}\n\nexport default {\n  data() {\n    return {\n      user: defaultForm,\n      saveBtnDisabled: false, // 保存按钮是否禁用,\n      validateRules: {\n        username: [\n          { required: true, trigger: 'blur', message: '用户名必须输入' },\n        ],\n        password: [\n          { required: true, trigger: 'blur', validator: validatePass },\n        ],\n      },\n    }\n  },\n\n  // 监听器\n  watch: {\n    $route(to, from) {\n      console.log('路由变化......')\n      console.log(to)\n      console.log(from)\n      this.init()\n    },\n  },\n\n  // 生命周期方法（在路由切换，组件不变的情况下不会被调用）\n  created() {\n    console.log('form created ......')\n    this.init()\n  },\n\n  methods: {\n    // 表单初始化\n    init() {\n      // debugger\n      if (this.$route.params && this.$route.params.id) {\n        const id = this.$route.params.id\n        this.fetchDataById(id)\n      } else {\n        // 对象拓展运算符：拷贝对象，而不是赋值对象的引用\n        this.user = { ...defaultForm }\n      }\n    },\n\n    saveOrUpdate() {\n      this.$refs.user.validate((valid) => {\n        if (valid) {\n          this.saveBtnDisabled = true // 防止表单重复提交\n          if (!this.user.userid) {\n            this.saveData()\n          } else {\n            this.updateData()\n          }\n        }\n      })\n    },\n\n    // 新增用户\n    saveData() {\n      userApi.save(this.user).then((response) => {\n        // debugger\n        if (response.success) {\n          this.$message({\n            type: 'success',\n            message: response.message,\n          })\n        }\n        this.$router.push({ path: '/acl/user/list' })\n      })\n    },\n\n    // 根据id更新记录\n    updateData() {\n      // teacher数据的获取\n      userApi.updateById(this.user).then((response) => {\n        // debugger\n        console.log(response.success)\n        if (response.success) {\n          this.$message({\n            type: 'success',\n            message: response.message,\n          })\n        }\n        this.$router.push({ path: '/acl/user/list' })\n      })\n    },\n\n    // 根据id查询记录\n    fetchDataById(id) {\n      // debugger\n      userApi.getById(id).then((response) => {\n        // debugger\n        this.user = response.data.item\n      })\n    },\n  },\n}\n</script>\n"],"sourceRoot":"src/views/acl/user"}]}